
var lfb_lastStepID=0;var lfb_lastSteps=new Array();var lfb_plannedSteps;var lfb_gmapService=false;var tld_selectionMode=false;jQuery(document).ready(function(){if(jQuery("#estimation_popup").length>0){if(document.location.href.indexOf("lfb_action=preview")>-1){jQuery("#estimation_popup:not(.wpe_fullscreen)").remove()}window.Dropzone.autoDiscover=false;initFlatUI();wpe_initForms()}});jQuery(window).load(function(){if(jQuery("#estimation_popup").length>0){jQuery.each(wpe_forms,function(){var a=this;wpe_checkItems(a.formID);wpe_initListeners(a.formID)});lfb_onResize();jQuery(window).resize(lfb_onResize);jQuery(window).on("popstate",function(a){if(a.originalEvent.state!==null){a.preventDefault();wpe_previousStep(wpe_forms[0].formID)}})}jQuery("#ajax-loading-screen").fadeOut();jQuery("#ajax-content-wrap >.container-wrap").css({opacity:1,display:"block"})});function wpe_getForm(b){var a=false;jQuery.each(wpe_forms,function(){if(this.formID==b){a=this}});return a}function lfb_changeCaptcha(c){var b=wpe_getForm(c);var a=Math.floor((Math.random()*100000)+1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_captcha').attr("src",b.captchaUrl+"?tmp="+a)}function lfb_onResize(){jQuery("#estimation_popup.wpe_fullscreen").css({minHeight:jQuery(window).height()});if(jQuery(window).width()<=768){jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})});jQuery("#estimation_popup .genContent ").each(function(){jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()+70})})}else{jQuery("#estimation_popup .lfb_stepDescription").each(function(){jQuery(this).css({top:jQuery(this).closest(".genSlide").find(".stepTitle").height()+60})});jQuery("#estimation_popup .genContent ").each(function(){jQuery(this).css({paddingTop:jQuery(this).closest(".genSlide").find(".stepTitle").height()+jQuery(this).closest(".genSlide").find(".lfb_stepDescription").height()+70})})}}function wpe_updatePlannedSteps(a){var b=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid"));lfb_plannedSteps=new Array();lfb_plannedSteps.push(b);lfb_plannedSteps=wpe_scanPlannedSteps(b,a)}function wpe_scanPlannedSteps(d,c){var a=new Array();var b=wpe_findPotentialsSteps(d,c);if(b.length>0&&b[0]!="final"){lfb_plannedSteps.push(b[0]);wpe_scanPlannedSteps(b[0],c)}else{return lfb_plannedSteps}return lfb_plannedSteps}function wpe_getTotalQuantities(f,e){var c=wpe_getForm(f);var d=wpe_getFormContent(f,true);var a=d[2];var h=0;var b=true;if(isNaN(e)||e==0){b=false}var g=false;jQuery.each(a,function(){var i=this;if(b&&!g&&i.stepid==e){g=true}if(!g||i.stepid==e){if(isNaN(i.quantity)){h++}else{h+=i.quantity}}});return h}function wpe_itemClick(l,f,d){var c=wpe_getForm(d);var j=false;var k=l;var e=false;if(f){jQuery('#estimation_popup[data-form="'+c.formID+'"] .quantityBtns').removeClass("open");jQuery('#estimation_popup[data-form="'+c.formID+'"] .quantityBtns').fadeOut(250);var g=navigator.userAgent.toLowerCase();var i=g.match(/(iPad|iPhone|iPod)/i);if(i){jQuery("body :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+c.formID+'"] > .tooltip').remove()}}if(f){k.addClass("action")}if((f)||(!k.is(".action"))){if(c.imgIconStyle!="zoom"){k.find("span.icon_select").animate({bottom:160,opacity:0},200)}if(k.is(".checked")){if((f)&&(k.data("required"))){}else{if(c.imgIconStyle=="zoom"){k.delay(200).css("transition-delay","0.2s");k.find("span.icon_select").css("transition-delay","0s")}else{k.css("transition-delay","0s")}var b=220;if(c.imgIconStyle=="zoom"){b=0}k.delay(b).removeClass("checked");if(c.imgIconStyle!="zoom"){k.delay(220).find("span.icon_select").removeClass("fui-check").addClass("fui-cross")}else{k.find("span.icon_select").css("transition-delay","0s")}k.delay(400).css("transition-delay","0s");k.find(".icon_quantity").delay(300).fadeOut(200)}}else{k.css("transition-delay","0s");if(c.disableTipMobile==0||!wpe_is_touch_device()){if(!l.is('[data-type="slider"]')&&!l.is(".lfb_button")&&c.imgTitlesStyle==""){l.b_tooltip("show")}}e=true;if(c.imgIconStyle=="zoom"){k.find("span.icon_select").css("transition-delay",".5s")}k.delay(220).addClass("checked");if(c.imgIconStyle!="zoom"){k.delay(220).find("span.icon_select").removeClass("fui-cross").addClass("fui-check")}if(k.find(".quantityBtns").length>0&&!k.is("[data-distanceqt]")){k.find(".icon_quantity").delay(300).fadeIn(200);k.find(".quantityBtns").delay(500).addClass("open");k.find(".quantityBtns").delay(500).fadeIn("200")}if(k.data("urltarget")&&k.data("urltarget")!=""){var a=k.data("urltargetmode");if(a!="_self"&&a!="_blank"){a="_blank"}var h=window.open(k.data("urltarget"),a);h.focus()}}if(c.imgIconStyle=="zoom"){}else{k.find("span.icon_select").delay(300).animate({bottom:0,opacity:1},200)}if((f)&&(k.data("group"))){k.closest(".genSlide").find('div.selectable.checked[data-group="'+k.data("group")+'"]').each(function(){wpe_itemClick(jQuery(this),false,d)});k.closest(".genSlide").find('input[type=checkbox][data-group="'+k.data("group")+'"]:checked').trigger("click.auto");k.closest(".genSlide").find('a.lfb_button.checked[data-group="'+k.data("group")+'"]').each(function(){wpe_itemClick(jQuery(this),false,d)});if(c.groupAutoClick=="1"&&k.is(".checked")&&k.closest(".genSlide").is("[data-required=true]")){setTimeout(function(){if(k.closest(".genSlide").find("[data-itemid]").not('[data-group="'+k.data("group")+'"]').not(".lfb_disabled").length==0&&k.closest(".genSlide").find('[data-group="'+k.data("group")+'"] .quantityBtns').length==0&&k.closest(".genSlide").find('[data-group="'+k.data("group")+'"] .wpe_qtfield').length==0){wpe_nextStep(c.formID)}},500)}}setTimeout(function(){wpe_updatePrice(d);k.removeClass("action")},420)}setTimeout(function(){if(k.is('[data-usedistance="true"]')){lfb_removeDistanceError(k.attr("data-itemid"),d)}},200)}function wpe_nl2br(c,b){c=c.replace(/\n\n/g,"\n");var a=(b||typeof b==="undefined")?"<br />":"<br>";return(c+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1"+a+"$2")}function wpe_initForms(){jQuery.each(wpe_forms,function(){var b=this;b.price=0;b.priceSingle=0;b.priceMax=0;b.step=0;b.gFormDesignCheck=0;b.timer_gFormSubmit=null;b.timer_gFormDesign=null;b.animationsSpeed*=1000;b.reductionResult=0;b.reduction=0;b.discountCode="";b.discountCodeDisplayed=false;b.initialPrice=parseFloat(b.initialPrice);b.contactSent=0;b.gravitySent=false;b.shineFxIndex=0;b.subscriptionText=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalPrice span:eq(1)').html();b.richtextsContent=new Array();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .lfb_richtext[data-itemid]').each(function(){b.richtextsContent[jQuery(this).attr("data-itemid").toString()]=jQuery(this).html()});var c=b.formID;if(b.save_to_cart==1){b.save_to_cart=true}else{b.save_to_cart=false}if(b.save_to_cart_edd==1){b.save_to_cart_edd=true}else{b.save_to_cart_edd=false}if(b.gravityFormID>0){jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"get_currentRef",formID:c},success:function(d){b.current_ref=d}})}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #mainPanel .genSlide .genContent div.selectable span.icon_select.lfb_fxZoom').css({textShadow:"-2px 0px "+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #mainPanel').css("background-color")});if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is(".wpe_popup")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').closest("#lfb_bootstraped").parent().is("body")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').closest("#lfb_bootstraped").detach().appendTo("body")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').length>0){Stripe.setPublishableKey(b.stripePubKey)}if(jQuery('#estimation_popup[data-form="'+b.formID+'"]').is(".wpe_fullscreen")){jQuery("html,body").css("overflow-y","hidden")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').length>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').attr("target","_self")}if(b.intro_enabled=="0"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .lfb_btnFloatingSummary').css({display:"inline-block"});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #btnStart,#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #startInfos').hide();if(b.showSteps!="2"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .genPrice').fadeIn(500)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .genPrice').hide()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #mainPanel').fadeIn(b.animationsSpeed,function(){wpe_nextStep(b.formID)})}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] input:not([type=checkbox])').change(function(){wpe_updatePrice(c)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] textarea').change(function(){wpe_updatePrice(c)});if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captcha').length>0){lfb_changeCaptcha(c)}if(b.enableShineFxBtn==1){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').find("a.btn-primary").append('<canvas class="lfb_shineCanvas"></canvas>');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').find("a.btn-primary").mouseover(function(){if(b.shineFxIndex==0){lfb_shineBtn(c,jQuery(this).find(".lfb_shineCanvas"))}})}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .lfb_dropzone').each(function(){var e=null;if(jQuery(this).attr("data-maxfiles")>0){e=jQuery(this).attr("data-maxfiles")}var d=jQuery(this);jQuery(this).dropzone({url:b.ajaxurl,paramName:"file",maxFilesize:jQuery(this).attr("data-filesize"),maxFiles:e,addRemoveLinks:true,dictRemoveFile:"",dictCancelUpload:"",acceptedFiles:jQuery(this).attr("data-allowedfiles"),dictDefaultMessage:b.filesUpload_text,dictFileTooBig:b.filesUploadSize_text,dictInvalidFileType:b.filesUploadType_text,dictMaxFilesExceeded:b.filesUploadLimit_text,init:function(){this.on("thumbnail",function(g,h){var f=jQuery(g.previewElement);f.attr("data-file",g)});this.on("sending",function(f,h,g){d.closest(".genSlide").find(".btn-next").fadeOut();d.closest(".genSlide").find(".btn-primary").fadeOut();g.append("action","lfb_upload_form");g.append("formSession",jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-formsession"));g.append("itemID",d.attr("data-itemid"))}),this.on("complete",function(f,g){if(d.find(".dz-preview:not(.dz-complete)").length==0||d.find(".dz-preview").length==0){d.closest(".genSlide").find(".btn-next").fadeIn();d.closest(".genSlide").find(".btn-primary").fadeIn()}wpe_updatePrice(b.formID)});this.on("success",function(g,h){var f=jQuery(g.previewElement);f.attr("data-file",g.name)});this.on("removedfile",function(f,g){wpe_updatePrice(b.formID)})}})});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] [data-itemid][data-type="slider"]').each(function(){var f=parseInt(jQuery(this).attr("data-min"));if(f==0){f=0}var d=parseInt(jQuery(this).attr("data-max"));if(d==0){d=30}var h=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+f+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide();var g=1;if(jQuery(this).is("[data-stepslider]")&&parseInt(jQuery(this).attr("data-stepslider"))>0){g=parseInt(jQuery(this).attr("data-stepslider"))}var e=false;if(jQuery(this).is("[data-usecalculationqt]")){e=true}jQuery(this).slider({min:f,max:d,value:f,step:g,disabled:e,orientation:"horizontal",range:"min",change:function(i,j){if(!tld_selectionMode){h.find(".tooltip-inner").html(j.value);if(i.originalEvent){wpe_updatePrice(c)}}},start:function(i,j){if(tld_selectionMode){return false}},slide:function(i,j){if(tld_selectionMode){return false}h.find(".tooltip-inner").html(j.value);if(i.originalEvent){setTimeout(function(){wpe_updatePrice(c)},30);h.show()}wpe_updatePrice(c)},stop:function(i,j){h.find(".tooltip-inner").html(j.value);wpe_updatePrice(c);h.hide()}}).find(".ui-slider-handle").append(h).hover(function(){if(!tld_selectionMode){h.show()}},function(){h.hide()})});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .lfb_colorpicker').each(function(){var d=jQuery(this);jQuery(this).prev(".lfb_colorPreview").click(function(){if(!tld_selectionMode){jQuery(this).next(".lfb_colorpicker").trigger("click")}});jQuery(this).prev(".lfb_colorPreview").css({backgroundColor:b.colorA});jQuery(this).colpick({color:b.colorA,layout:"hex",onSubmit:function(){jQuery("body > .colpick").fadeOut()},onChange:function(e,i,g,h,f){jQuery(h).val("#"+i);jQuery(h).prev(".lfb_colorPreview").css({backgroundColor:"#"+i})}})});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').find('.lfb_colorPreview[data-urltarget],input[type="text"][data-itemid]:not(.lfb_colorpicker)[data-urltarget],textarea[data-itemid][data-urltarget],select[data-itemid][data-urltarget]').each(function(){jQuery(this).click(function(){if(!tld_selectionMode){var d=window.open(jQuery(this).attr("data-urltarget"),"_blank");d.focus()}})});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').find('[data-autocomplete="1"]').each(function(){var d={};if(jQuery(this).attr("data-fieldtype")=="city"){d.types=["(cities)"]}else{if(jQuery(this).attr("data-fieldtype")=="address"){if(jQuery(this).closest(".genContent").find('[data-fieldtype="city"]').length>0){d.types=["address"]}}else{if(jQuery(this).attr("data-fieldtype")=="country"){d.types=["country"]}else{if(jQuery(this).attr("data-fieldtype")=="zip"){d.types=["zip"]}}}}new google.maps.places.Autocomplete(jQuery(this).get(0),d)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide .lfb_timepicker').each(function(){jQuery(this).timepicker({showMeridian:parseInt(b.timeModeAM),appendWidgetTo:'#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]'});jQuery(this).click(function(){jQuery(this).timepicker("showWidget")});jQuery(this).timepicker().on("changeTime.timepicker",function(k){var g=jQuery(this).attr("data-mintime");var h=jQuery(this).attr("data-maxtime");if(g!=""&&g.indexOf(":")>0){var i=parseInt(g.substr(0,g.indexOf(":")));var l=parseInt(g.substr(g.indexOf(":")+1,2));if(g.indexOf("PM")>0&&i!=12){i+=12}var f=k.time.hours;if(k.time.meridian=="PM"){f+=12}if(f<i||(f==i&&k.time.minutes<l)){jQuery(this).val("")}}if(h!=""&&h.indexOf(":")>0){var j=parseInt(h.substr(0,h.indexOf(":")));var d=parseInt(h.substr(h.indexOf(":")+1,2));if(h.indexOf("PM")>0&&j!=12){j+=12}var f=k.time.hours;if(k.time.meridian=="PM"){f+=12}if(f>j||(f==j&&k.time.minutes>d)){jQuery(this).val("")}}})});var a=wpe_forms[0].dateFormat;a=a.replace(/\\\//g,"/");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide .lfb_datepicker').each(function(){var d=0;if(jQuery(this).is('[data-allowpast="1"]')){d=null}jQuery(this).datepicker({dateFormat:a,onClose:function(f,e){jQuery(this).attr("disabled",false);jQuery(this).closest(".form-group").removeClass("lfb_focus")},beforeShow:function(f,e){jQuery(this).attr("disabled",true);jQuery(this).closest(".form-group").addClass("lfb_focus");jQuery(this).blur();jQuery("#ui-datepicker-div").addClass("lfb_datepickerContainer");if(parseInt(jQuery(this).attr("data-showmonths"))==1||parseInt(jQuery(this).attr("data-showmonths"))==1){jQuery("#ui-datepicker-div").addClass("lfb_datepickerHasMenu")}},minDate:d,changeMonth:parseInt(jQuery(this).attr("data-showmonths")),changeYear:parseInt(jQuery(this).attr("data-showyears"))})});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide .lfb_datepicker').keypress(function(d){d.preventDefault()});if(wpe_forms[0].datepickerLang==""){wpe_forms[0].datepickerLang="en"}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide .lfb_datepicker').datepicker("option",jQuery.datepicker.regional[wpe_forms[0].datePickerLanguage]);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide .lfb_datepicker').datepicker("option","dateFormat",a);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .lfb_datepicker').each(function(){if(jQuery(this).attr("placeholder").length==0&&jQuery(this).val().length==0){jQuery(this).datepicker("setDate",new Date())}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide [data-group]').each(function(){var d=jQuery(this);if(b.groupAutoClick=="1"&&d.prop("data-group")!=""&&d.closest(".genSlide").is("[data-required=true]")){if(d.closest(".genSlide").find("[data-itemid]:not(.lfb_disabled)").not('[data-group="'+d.data("group")+'"]').not(".lfb_disabled").length==0&&d.closest(".genSlide").find('[data-group="'+d.data("group")+'"] .quantityBtns').length==0&&d.closest(".genSlide").find('[data-group="'+d.data("group")+'"] .wpe_qtfield').length==0){d.closest(".genSlide").find(".btn-next").addClass("lfb-hidden")}}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide div.selectable.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #mainPanel .genSlide a.lfb_button.prechecked,#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #mainPanel .genSlide input[type=checkbox][data-price].prechecked').each(function(){wpe_itemClick(jQuery(this),false,c)});wpe_initPrice(c);wpe_updatePrice(c);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #btnStart').click(function(){if(!tld_selectionMode){wpe_openGenerator(c)}});wpe_initGform(c);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').length>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').attr("target","_self")}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .quantityBtns > a').click(function(){if(!tld_selectionMode){if(jQuery(this).attr("data-btn")=="less"){wpe_quantity_less(this,c)}else{wpe_quantity_more(this,c)}}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .linkPrevious').click(function(){if(!tld_selectionMode){wpe_previousStep(c)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .btn-next').click(function(){if(!tld_selectionMode){wpe_nextStep(c)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #btnOrderPaypal').click(function(){if(!tld_selectionMode){wpe_order(c)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide [data-toggle="switch"]').change(function(){var d=jQuery(this).attr("data-fieldid");wpe_toggleField(d,c)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').submit(function(g){var f=false;var d=lfb_checkStepItemsValid("final",c);if(!d){f=true}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide #lfb_legalCheckbox:not(:checked)').length>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error");f=true}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide #lfb_legalCheckbox:checked').length>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_legalCheckbox').closest(".form-group").removeClass("has-error")}}var e=true;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] [data-activatePaypal="true"]:not(:checked)').length>0){e=false}if(!e){g.preventDefault();wpe_order(c)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="number"]').closest(".form-group").removeClass("has-error");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_month"]').closest(".form-group").removeClass("has-error");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_year"]').closest(".form-group").removeClass("has-error");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="cvc"]').closest(".form-group").removeClass("has-error");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="number"]').val().length<5){f=true;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="number"]').closest(".form-group").addClass("has-error")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_month"]').val().length<2){f=true;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_month"]').closest(".form-group").addClass("has-error")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_year"]').val().length<2){f=true;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="exp_year"]').closest(".form-group").addClass("has-error")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="cvc"]').val().length<2){f=true;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm [data-stripe="cvc"]').closest(".form-group").addClass("has-error")}if(!f){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captcha').length>0){jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_checkCaptcha",formID:c,captcha:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captchaField').val()},success:function(h){if(h=="1"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm #wpe_btnOrderStripe').prop("disabled",true);Stripe.card.createToken(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm'),function(i,j){lfb_stripeResponse(i,j,b.formID)})}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captchaField').closest(".form-group").addClass("has-error")}}})}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm #wpe_btnOrderStripe').prop("disabled",true);Stripe.card.createToken(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm'),function(h,i){lfb_stripeResponse(h,i,b.formID)})}}return false}});jQuery(".gform_wrapper").each(function(){var d=jQuery(this).attr("id").substr(jQuery(this).attr("id").lastIndexOf("_")+1,jQuery(this).attr("id").length);if(d==b.gravityFormID){jQuery(this).detach().insertAfter('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalPrice')}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .wpe_qtfield').attr("type","number");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .wpe_qtfield').focusout(function(){if(jQuery(this).val().indexOf("-")>-1&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)){jQuery(this).val(parseInt(jQuery(this).attr("min")))}if(parseFloat(jQuery(this).val())<parseInt(jQuery(this).attr("min"))){jQuery(this).val(jQuery(this).attr("min"))}if(parseFloat(jQuery(this).val())>parseInt(jQuery(this).attr("max"))){jQuery(this).val(jQuery(this).attr("max"))}wpe_updatePrice(b.formID);wpe_updateSummary(b.formID)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] input[type="number"][data-itemid]').focusout(function(){if(jQuery(this).val().indexOf("-")>-1&&(!jQuery(this).is("[min]")||jQuery(this).attr("min").indexOf("-")<0)){jQuery(this).val(parseInt(jQuery(this).attr("min")))}if(parseFloat(jQuery(this).val())<parseFloat(jQuery(this).attr("min"))){jQuery(this).val(jQuery(this).attr("min"))}if(parseFloat(jQuery(this).val())>parseFloat(jQuery(this).attr("max"))){jQuery(this).val(jQuery(this).attr("max"))}if(jQuery(this).val()!=""){jQuery(this).addClass("checked")}wpe_updatePrice(b.formID);wpe_updateSummary(b.formID)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .wpe_sliderQt').each(function(){var e=parseInt(jQuery(this).closest(".quantityBtns").attr("data-min"));if(e==0){e=1}var g=jQuery('<div class="tooltip top" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner">'+e+"</div></div>").css({position:"absolute",top:-55,left:-20,opacity:1}).hide();var f=1;if(jQuery(this).closest(".quantityBtns").is("[data-stepslider]")&&parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider"))>0){f=parseInt(jQuery(this).closest(".quantityBtns").attr("data-stepslider"))}var d=false;if(jQuery(this).closest(".selectable").is("[data-usecalculationqt]")){d=true}jQuery(this).slider({min:e,max:parseInt(jQuery(this).closest(".quantityBtns").attr("data-max")),value:parseInt(jQuery(this).closest(".quantityBtns").next(".icon_quantity").html()),orientation:"horizontal",range:"min",disabled:d,step:f,change:function(h,i){g.find(".tooltip-inner").html(i.value);jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(i.value);if(h.originalEvent){wpe_updatePrice(c)}},slide:function(h,i){jQuery(this).closest(".quantityBtns").next(".icon_quantity").html(i.value);g.find(".tooltip-inner").html(i.value);if(h.originalEvent){wpe_updatePrice(c)}}}).find(".ui-slider-handle").append(g).hover(function(){g.show()},function(){g.hide()})});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]  #lfb_loader').fadeOut()})}function lfb_stripeResponse(a,c,e){var b=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_stripeForm');if(c.error){b.find(".payment-errors").text(c.error.message);b.find(".btn").prop("disabled",false)}else{var d=c.id;if(b.find('[name="stripeToken"]').length==0){b.append(jQuery('<input type="hidden" name="stripeToken">').val(d));Stripe.card.createToken(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_stripeForm'),function(g,f){lfb_stripeResponse(g,f,e)})}else{if(b.find('[name="stripeTokenB"]').length==0){b.append(jQuery('<input type="hidden" name="stripeTokenB">').val(d));wpe_order(e)}}}}function lfb_replaceAllBackSlash(b){var a=b.indexOf("\\");while(a>=0){b=b.replace("\\","");a=b.indexOf("\\")}return b}function lfb_shineBtn(g,f){var e=wpe_getForm(g);f.attr({width:f.width(),height:f.height()});f.css({borderRadius:f.parent().css("border-radius")});var c=f.get(0).getContext("2d");c.clearRect(0,0,f.width(),f.height());var b=c.createLinearGradient(0,0,f.width(),f.height());e.shineFxIndex+=0.08;if(e.shineFxIndex>1){c.clearRect(0,0,f.width(),f.height());e.shineFxIndex=0}else{var h=e.shineFxIndex;var a=h-0.1;if(a<0){a=0}var d=h+0.1;if(d>1){d=1}b.addColorStop(0,"transparent");b.addColorStop(a,"rgba(255,255,255,0)");b.addColorStop(h,"rgba(255,255,255,0.3)");b.addColorStop(d,"rgba(255,255,255,0)");b.addColorStop(1,"rgba(255,255,255,0)");c.fillStyle=b;c.fillRect(0,0,f.width(),f.height());setTimeout(function(){lfb_shineBtn(g,f)},30)}}function lfb_updateLayerImages(a){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .lfb_layeredImage').each(function(){var b=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));jQuery(this).find("img:not(.lfb_baseLayer)").each(function(){var f=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));f=f.replace(/'/g,'"');if(f.length>0){try{f=JSON.parse(f);var g=lfb_checkConditions(f,a,b);var c=jQuery(this).attr("data-showconditionsoperator");if((c=="OR"&&!g.errorOR)||(c!="OR"&&!g.error)){jQuery(this).fadeIn()}else{jQuery(this).fadeOut()}}catch(d){jQuery(this).fadeIn()}}else{jQuery(this).fadeIn()}})})}function lfb_updateShowSteps(a){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] .genSlide[data-useshowconditions]').each(function(){var d=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));d=d.replace(/'/g,'"');if(d!=""){try{d=JSON.parse(d);var f=lfb_checkConditions(d,a,parseInt(jQuery(this).attr("data-stepid")));var b=jQuery(this).attr("data-showconditionsoperator");if((b=="OR"&&!f.errorOR)||(b!="OR"&&!f.error)){if(jQuery(this).is(".lfb_disabled")){jQuery(this).css({opacity:0});jQuery(this).removeClass("lfb_disabled")}}else{if(!jQuery(this).is(".lfb_disabled")){jQuery(this).addClass("lfb_disabled")}}}catch(c){}}})}function lfb_updateShowItems(e){var d=wpe_getForm(e);var a=lfb_lastSteps.slice();var c=0;var b=0;if(d.step!="final"&&jQuery.inArray(parseInt(d.step),a)==-1){a.push(parseInt(d.step))}else{if(d.step=="final"){a.push("final")}}jQuery.each(a,function(){var f=this;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .genSlide[data-stepid="'+this+'"] [data-useshowconditions]').each(function(){var i=lfb_replaceAllBackSlash(jQuery(this).attr("data-showconditions"));i=i.replace(/'/g,'"');if(i!=""){try{i=JSON.parse(i);var j=lfb_checkConditions(i,e,f);var g=jQuery(this).attr("data-showconditionsoperator");if((g=="OR"&&!j.errorOR)||(g!="OR"&&!j.error)){if(jQuery(this).is(".lfb_disabled")){jQuery(this).css({opacity:0});jQuery(this).removeClass("lfb_disabled");jQuery(this).closest(".itemBloc").removeClass("lfb_disabled");jQuery(this).stop().animate({opacity:1},300);if(jQuery(this).is("input.prechecked")&&!jQuery(this).is(":checked")){wpe_itemClick(jQuery(this),false,e)}if(jQuery(this).is(".selectable.prechecked")&&!jQuery(this).is(".checked")){wpe_itemClick(jQuery(this),false,e)}if(jQuery(this).is(".lfb_button.prechecked")&&!jQuery(this).is(".checked")){wpe_itemClick(jQuery(this),false,e)}jQuery(this).closest(".itemBloc").stop().fadeIn(300)}}else{if(!jQuery(this).is(".lfb_disabled")){jQuery(this).css({opacity:1});if(jQuery(this).is(":checked")){wpe_itemClick(jQuery(this),false,e)}if(jQuery(this).is(".checked")){wpe_itemClick(jQuery(this),false,e)}if(jQuery(this).is('input[type="text"]')||jQuery(this).is("textarea")){jQuery(this).val("")}if(jQuery(this).is(".lfb_dropzone")){jQuery(this).find(".dz-preview").remove()}jQuery(this).addClass("lfb_disabled");jQuery(this).closest(".itemBloc").addClass("lfb_disabled");jQuery(this).stop().animate({opacity:0},300);jQuery(this).closest(".itemBloc").stop().fadeOut(300)}}}catch(h){}}})})}function lfb_removeFile(c,a){var b=wpe_getForm(c);jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_removeFile",formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-formsession"),file:a}})}function wpe_disablesThemeScripts(){var a=false;jQuery("script").each(function(){if((a)){if(jQuery(this).attr("src")&&jQuery(this).attr("src").indexOf("WP_Helper_Creator")>0){}else{if(jQuery(this).attr("src")&&jQuery(this).attr("src").indexOf("VisitorsTracker")>0){}else{if(jQuery(this).attr("src")&&jQuery(this).attr("src").indexOf("WP_Visual_Chat")>0){}else{if(jQuery(this).attr("src")&&jQuery(this).attr("src").indexOf("gravityforms")>0){}else{var b=this.innerText||this.textContent;if(b.indexOf("analytics")<0&&jQuery(this).parents(".gform_wrapper").length==0){jQuery(this).attr("disabled","disabled")}}}}}}if(jQuery(this).attr("src")&&jQuery(this).attr("src").indexOf("estimation_popup")>0){a=true}})}function wpe_initGform(b){var a=wpe_getForm(b);if(a.gravityFormID>0){a.gravitySent=false;a.gFormDesignCheck++;if(a.timer_gFormDesign){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(100).animate({opacity:1},1000)}jQuery("#gform_wrapper_"+a.gravityFormID+" input[type=radio]").not('[data-toggle="radio"]').attr("data-toggle","radio");jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container select,#gform_wrapper_"+a.gravityFormID+" .ginput_container textarea").attr("title","control");jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container input,#gform_wrapper_"+a.gravityFormID+"  .ginput_container textarea, #gform_wrapper_"+a.gravityFormID+" .ginput_container select").not("[type=checkbox]").not("[type=radio]").not("[type=submit]").addClass("form-control");jQuery("#gform_wrapper_"+a.gravityFormID+"  .ginput_container").addClass("form-group");jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_button").attr("class","btn btn-wide btn-primary");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="radio"]:not(.ready)').each(function(){jQuery(this).addClass("ready");var c=jQuery("#gform_wrapper_"+a.gravityFormID+' .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this));jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("radio");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').prepend('<span class="icons"><span class="first-icon fui-radio-unchecked"></span><span class="second-icon fui-radio-checked"></span></span>');if(!jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")){jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>")}if(jQuery(this).is(":checked")){jQuery(this).trigger("click")}});jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper input[type="checkbox"]:not(.ready)').each(function(){jQuery(this).addClass("ready");var c=jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').html();jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").css("display","inline-block");jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').append(jQuery(this));jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').addClass("checkbox");jQuery(this).before('<span class="icons"><span class="first-icon fui-checkbox-unchecked"></span><span class="second-icon fui-checkbox-checked"></span></span>');if(!jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").next().is("br")){jQuery("#gform_wrapper_"+a.gravityFormID+'  .gform_wrapper label[for="'+jQuery(this).attr("id")+'"]').parent("li").after("<br/>")}});jQuery("#gform_wrapper_"+a.gravityFormID+"  .gform_wrapper label.checkbox").each(function(){if(jQuery(this).find("[type=checkbox]").length>0){jQuery(this).find("[type=checkbox]").eq(1).remove()}if(jQuery(this).find("[type=checkbox]").is(":checked")){jQuery(this).find("[type=checkbox]").trigger("click")}});if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm').length>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wtmt_paypalForm  #btnOrderPaypal').hide()}jQuery(" #gform_submit_button_"+a.gravityFormID).click(function(d){d.preventDefault();if(!tld_selectionMode){if(!a.gravitySent){a.gravitySent=true;jQuery(this).addClass("anim");a.gFormDesignCheck=0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide').delay(1000).animate({opacity:0},1000);var c=jQuery(this);setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #finalSlide .gform_wrapper form').submit();a.timer_gFormDesign=setTimeout(function(){wpe_initGform(b)},2000)},1000)}}})}}function wpe_initPrice(b){var a=wpe_getForm(b);if(a.max_price>0){a.priceMax=a.max_price}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide [data-price]').each(function(){if(jQuery(this).data("price")&&jQuery(this).data("price")>0){if(jQuery(this).find(".icon_quantity").length>0){var c=parseFloat(jQuery(this).find(".icon_quantity").html());if(c>10&&parseFloat(jQuery(this).data("price"))>100){c=10}else{if(c>30){c=30}else{c=parseFloat(jQuery(this).find(".quantityBtns").data("max"))}}if(jQuery(this).data("operation")=="-"||jQuery(this).data("operation")=="/"){}else{a.priceMax+=parseFloat(jQuery(this).data("price"))*c}}else{if(jQuery(this).find(".wpe_qtfield").length>0){var c=parseFloat(jQuery(this).find(".wpe_qtfield").val());if(c>10&&parseFloat(jQuery(this).data("price"))>100){c=10}else{if(c>30){c=30}else{if(parseFloat(jQuery(this).find(".wpe_qtfield").attr("max").length>0)){c=parseFloat(jQuery(this).find(".wpe_qtfield").attr("max"))}else{c=30}}}if(jQuery(this).data("operation")=="-"||jQuery(this).data("operation")=="/"){}else{a.priceMax+=parseFloat(jQuery(this).data("price"))*c}}else{if(jQuery(this).data("operation")=="+"){a.priceMax+=parseFloat(jQuery(this).data("price"))}}}}});a.priceMax+=a.initialPrice;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide [data-price][data-operation="x"]').each(function(){if(jQuery(this).find(".icon_quantity").length>0){for(var c=0;c<parseFloat(jQuery(this).find(".icon_quantity").html());c++){a.priceMax=a.priceMax+(a.priceMax*parseFloat(jQuery(this).data("price"))/100)}}else{a.priceMax=a.priceMax+(a.priceMax*parseFloat(jQuery(this).data("price"))/100)}})}}function initFlatUI(){jQuery("#estimation_popup.wpe_bootstraped .input-group").on("focus",".form-control",function(){jQuery(this).closest(".input-group, .form-group").addClass("focus")}).on("blur",".form-control",function(){jQuery(this).closest(".input-group, .form-group").removeClass("focus")});jQuery("#estimation_popup.wpe_bootstraped .pagination").on("click","a",function(){jQuery(this).parent().siblings("li").removeClass("active").end().addClass("active")});jQuery("#estimation_popup.wpe_bootstraped .btn-group").on("click","a",function(){jQuery(this).siblings().removeClass("active").end().addClass("active")});jQuery("#estimation_popup.wpe_bootstraped [data-toggle='switch']").wrap('<div class="switch"  data-on-label="<i class=\'fui-check\'></i>" data-off-label="<i class=\'fui-cross\'></i>" />').parent().bootstrapSwitch();jQuery("#estimation_popup.wpe_bootstraped input[type=checkbox][data-urltarget]").each(function(){jQuery(this).closest(".switch.has-switch").click(function(){if(!tld_selectionMode){if(jQuery(this).find(".switch-on").length>0){var a=window.open(jQuery(this).find("input[type=checkbox][data-urltarget]").attr("data-urltarget"),"_blank");a.focus()}}})});if(jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").length>0){jQuery("#estimation_popup.wpe_bootstraped .lfb_selectpicker").selectpicker()}}function wpe_getFormContent(c,j){var b=wpe_getForm(c);var f="";var a="";var i="";var h=new Array();a+="Ref : "+b.current_ref+" \n";var k="";var e=lfb_lastSteps.slice();if(j){if(b.step!="final"){e.push(b.step)}}if(b.step=="final"){e.push("final")}var d=new Array();jQuery.each(e,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+this+'"]');if(($panel.attr("data-stepid")=="final"||jQuery.inArray(parseInt($panel.attr("data-stepid")),lfb_plannedSteps)>=0)&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-title][data-stepid="'+this+'"]').is(".lfb_disabled")){f+="<br/><p><u><b>"+$panel.data("title")+" :</b></u></p><br/>";a+="\n\n---------"+$panel.data("title")+" :---------\n";$panel.find(".itemBloc:not(.lfb_disabled)").each(function(){var m=jQuery(this);var s=true;if(m.find("div.selectable.checked").length>0){var x=m.find("div.selectable.checked").get(0);var p="";if(jQuery(x).is("[data-resqt]")){jQuery(x).data("resqt",jQuery(x).attr("data-resqt"))}if(jQuery(x).is("[data-resprice]")){jQuery(x).data("resprice",jQuery(x).attr("data-resprice"))}if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}var q=parseFloat(jQuery(x).data("resqt"));var y=parseFloat(jQuery(x).data("resprice"));if(q==0){q=1}if(q>1){p=q+"X "}if(jQuery(x).data("price")){if(jQuery(x).data("operation")=="+"){if(b.currencyPosition=="left"){y=b.currency+y}else{y+=b.currency}}else{if(jQuery(x).data("operation")=="-"){if(b.currencyPosition=="left"){y="-"+b.currency+y}else{y+="-"+b.currency}}else{if(jQuery(x).data("operation")=="/"){y="-"+jQuery(x).data("price")+"%"}else{y="+"+jQuery(x).data("price")+"%"}}}if(s){f+="    - "+p+jQuery(x).data("originaltitle")+" : "+y+"<br/>";a+=" - "+p+jQuery(x).data("originaltitle")+" : "+y+"\n"}}else{if(s){f+="    - "+p+jQuery(x).data("originaltitle")+"<br/>";a+=" - "+p+jQuery(x).data("originaltitle")+"\n"}}var n=parseFloat(jQuery(x).data("resprice"));if(isNaN(n)){n=parseFloat(jQuery(x).data("price"))}var t=false;if(jQuery(x).is('[data-singleprice="true"]')){t=true}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));var w=jQuery(x).attr("data-title");if(jQuery(x).is("[data-original-title]")&&jQuery(x).is("[data-reducqt]")){w=jQuery(x).attr("data-original-title")}if(jQuery(x).is("[data-originaltitle]")&&jQuery(x).is('[data-showprice="1"]')){w=jQuery(x).attr("data-originaltitle")}h.push({label:w,itemid:jQuery(x).attr("data-itemid"),price:n,quantity:q,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isSinglePrice:t})}}if(m.find("a.lfb_button.checked").length>0){var x=m.find("a.lfb_button.checked").get(0);var y=parseFloat(jQuery(x).data("price"));if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(jQuery(x).data("price")){if(jQuery(x).data("operation")=="+"){if(b.currencyPosition=="left"){y=b.currency+y}else{y+=b.currency}}else{if(jQuery(x).data("operation")=="-"){if(b.currencyPosition=="left"){y="-"+b.currency+y}else{y+="-"+b.currency}}else{if(jQuery(x).data("operation")=="/"){y="-"+y+"%"}else{y="+"+y+"%"}}}var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" ("+jQuery(x).val()+")"}if(s){f+="    - "+v+" : "+y+"<br/>";a+=" - "+v+" : "+y+"\n"}}else{var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" : "+jQuery(x).val()+""}if(s){f+="    - "+v+"<br/>";a+=" - "+v+"\n"}}var w=jQuery(x).attr("data-title");if(jQuery(x).is("[data-originaltitle]")&&jQuery(x).is('[data-showprice="1"]')){w=jQuery(x).attr("data-originaltitle")}if(jQuery(x).is("select")){w+=" : "+jQuery(x).val()}var t=false;if(jQuery(x).is('[data-singleprice="true"]')){t=true}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:w,itemid:jQuery(x).attr("data-itemid"),price:parseFloat(jQuery(x).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isSinglePrice:t})}}if(m.find("input[type=checkbox]:checked").length>0){var x=m.find("input[type=checkbox]:checked").get(0);var y=parseFloat(jQuery(x).data("price"));if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(jQuery(x).data("price")){if(jQuery(x).data("operation")=="+"){if(b.currencyPosition=="left"){y=b.currency+y}else{y+=b.currency}}else{if(jQuery(x).data("operation")=="-"){if(b.currencyPosition=="left"){y="-"+b.currency+y}else{y+="-"+b.currency}}else{if(jQuery(x).data("operation")=="/"){y="-"+y+"%"}else{y="+"+y+"%"}}}var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" ("+jQuery(x).val()+")"}if(s){f+="    - "+v+" : "+y+"<br/>";a+=" - "+v+" : "+y+"\n"}}else{var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" : "+jQuery(x).val()+""}if(s){f+="    - "+v+"<br/>";a+=" - "+v+"\n"}}var w=jQuery(x).attr("data-title");if(jQuery(x).is("[data-originaltitle]")&&jQuery(x).is('[data-showprice="1"]')){w=jQuery(x).attr("data-originaltitle")}if(jQuery(x).is("select")){w+=" : "+jQuery(x).val()}var t=false;if(jQuery(x).is('[data-singleprice="true"]')){t=true}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:w,itemid:jQuery(x).attr("data-itemid"),price:parseFloat(jQuery(x).data("resprice")),quantity:1,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isSinglePrice:t})}}if(m.find('div[data-type="slider"]').length>0){var x=m.find('div[data-type="slider"]').get(0);var y=parseFloat(jQuery(x).data("price"));if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(jQuery(x).data("price")){if(jQuery(x).data("operation")=="+"){if(b.currencyPosition=="left"){y=b.currency+y}else{y+=b.currency}}else{if(jQuery(x).data("operation")=="-"){if(b.currencyPosition=="left"){y="-"+b.currency+y}else{y+="-"+b.currency}}else{if(jQuery(x).data("operation")=="/"){y="-"+y+"%"}else{y="+"+y+"%"}}}var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" ("+jQuery(x).val()+")"}if(s){f+="    - "+v+" : "+y+"<br/>";a+=" - "+v+" : "+y+"\n"}}else{var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" : "+jQuery(x).val()+""}if(s){f+="    - "+v+"<br/>";a+=" - "+v+"\n"}}var w=jQuery(x).attr("data-title");if(jQuery(x).is("[data-originaltitle]")&&jQuery(x).is('[data-showprice="1"]')){w=jQuery(x).attr("data-originaltitle")}if(jQuery(x).is("select")){w+=" : "+jQuery(x).val()}var t=false;if(jQuery(x).is('[data-singleprice="true"]')){t=true}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:w,itemid:jQuery(x).attr("data-itemid"),price:parseFloat(jQuery(x).data("resprice")),quantity:parseFloat(jQuery(x).slider("value")),step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isSinglePrice:t})}}if(m.find("select[data-itemid]").length>0){var x=m.find("select[data-itemid]").get(0);var y=parseFloat(jQuery(x).data("price"));if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(jQuery(x).data("price")){if(jQuery(x).data("operation")=="+"){if(b.currencyPosition=="left"){y=b.currency+y}else{y+=b.currency}}else{if(jQuery(x).data("operation")=="-"){if(b.currencyPosition=="left"){y="-"+b.currency+y}else{y+="-"+b.currency}}else{if(jQuery(x).data("operation")=="/"){y="-"+y+"%"}else{y="+"+y+"%"}}}var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" ("+jQuery(x).val()+")"}if(s){f+="    - "+v+" : "+y+"<br/>";a+=" - "+v+" : "+y+"\n"}}else{var v=jQuery(x).attr("data-originaltitle");if(jQuery(x).is("select")){v+=" : "+jQuery(x).val()+""}if(s){f+="    - "+v+"<br/>";a+=" - "+v+"\n"}}var w=jQuery(x).attr("data-title");var t=false;if(jQuery(x).is('[data-singleprice="true"]')){t=true}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:w,itemid:jQuery(x).attr("data-itemid"),price:parseFloat(jQuery(x).data("resprice")),value:jQuery(x).val(),quantity:1,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isSinglePrice:t})}}if(m.find("input[type=file]").length>0){var x=m.find("input[type=file]").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(s){f+='    - <span style="text-decoration: underline;" class="lfb_file">'+jQuery(x).data("originaltitle")+" : "+jQuery(x).val().replace(/ /g,"_")+"</span><br/>";a+=" - "+jQuery(x).data("originaltitle")+" : "+jQuery(x).val().replace(/ /g,"_")+"\n"}if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:jQuery(x).val(),step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isFile:true})}}if(m.find(".lfb_dropzone").length>0){var x=m.find(".lfb_dropzone").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}var u="";var o="";jQuery(x).find(".dz-preview[data-file]").each(function(){u+=' - <span class="lfb_file">'+jQuery(this).attr("data-file").replace(/ /g,"_")+"</span><br/>";o+=" - "+jQuery(this).attr("data-file").replace(/ /g,"_")+"\n"});if(s){f+='    - <span class="lfb_file">'+jQuery(x).data("originaltitle")+" : "+u+"</span><br/>";a+=" - "+jQuery(x).data("originaltitle")+" : "+o+"\n\n"}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:u,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s,isFile:true})}}if(m.find("input[type=text]:not(.lfb_colorpicker)").length>0){var x=m.find("input[type=text]:not(.lfb_colorpicker)").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(s){f+="    - "+jQuery(x).data("title")+" : <b>"+jQuery(x).val()+"</b><br/>";a+=" - "+jQuery(x).data("title")+" : "+jQuery(x).val()+" \n"}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:jQuery(x).val(),step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s})}}if(m.find("input[type=number]:not(.lfb_colorpicker)").length>0){var x=m.find("input[type=number]:not(.lfb_colorpicker)").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(s){f+="    - "+jQuery(x).data("title")+" : <b>"+jQuery(x).val()+"</b><br/>";a+=" - "+jQuery(x).data("title")+" : "+jQuery(x).val()+" \n"}var r=jQuery(x).val();var l=undefined;var n=undefined;if(jQuery(x).is('[data-valueasqt="1"]')){r=undefined;l=jQuery(x).val();n=parseFloat(jQuery(x).data("resprice"));if(isNaN(n)){n=parseFloat(jQuery(x).data("price"))}}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:r,quantity:l,price:n,step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s})}}if(m.find(".lfb_colorPreview").length>0){var x=m.find(".lfb_colorPreview").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(s){f+="    - "+jQuery(x).data("title")+" : <b>"+jQuery(x).next(".lfb_colorpicker").val()+"</b><br/>";a+=" - "+jQuery(x).data("title")+" : "+jQuery(x).next(".lfb_colorpicker").val()+" \n"}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:jQuery(x).next(".lfb_colorpicker").val(),step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s})}}if(m.find("textarea").length>0){var x=m.find("textarea").get(0);if($panel.is('[data-showstepsum="0"]')||!jQuery(x).is('[data-showinsummary="true"]')){s=false}if(s){f+="    - "+jQuery(x).data("title")+" : <b>"+jQuery(x).val()+"</b><br/>";a+=" - "+jQuery(x).data("title")+" : "+jQuery(x).val()+" \n"}if(jQuery.inArray(jQuery(x).attr("data-itemid"),d)==-1){d.push(jQuery(x).attr("data-itemid"));h.push({label:jQuery(x).data("title"),itemid:jQuery(x).attr("data-itemid"),value:wpe_nl2br(jQuery(x).val()),step:$panel.attr("data-title"),stepid:parseInt($panel.attr("data-stepid")),showInSummary:s})}}})}});if(!b.price||b.price<0){b.price=0}var g=/^\d+(\.\d{2})?$/;if(!g.test(b.price)){b.price=parseFloat(b.price).toFixed(2)}if(b.currencyPosition=="left"){i+=b.currency+b.price;a+="\n\nTotal : "+b.currency+b.price}else{i+=b.price+b.currency;a+="\n\nTotal : "+b.price+b.currency}return new Array(f,i,h,a)}function wpe_check_gform_response(d){var c=wpe_getForm(d);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #gforms_confirmation_message').length>0){clearInterval(c.timer_gFormSubmit);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm').length>0&&c.price>0){var b=c.price;if(c.payMode=="percent"){b=parseFloat(b)*(parseFloat(c.percentToPay)/100)}else{if(c.payMode=="fixed"){b=parseFloat(c.fixedToPay)}}b=parseFloat(b).toFixed(2);if(c.priceSingle>0){var a=c.priceSingle;if(c.payMode=="percent"){a=parseFloat(a)*(parseFloat(c.percentToPay)/100)}else{if(c.payMode=="fixed"){a=parseFloat(c.fixedToPay)}}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=a1]').length==0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0">');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1">');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M">')}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=a1]').val(a);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=p3]').val())}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=a1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=t1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=p1]').remove()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=amount]').val(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=a3]').val(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=item_number]').val(c.current_ref);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+c.current_ref);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")}else{jQuery("#finalText").html(jQuery("#gform_wrapper_"+c.gravityFormID+" .gforms_confirmation_message").html());jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #finalSlide #gforms_confirmation_message').fadeIn();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #finalSlide #lfb_summary').fadeOut();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #finalSlide #lfb_couponContainer').fadeOut();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #finalSlide #lfb_legalNoticeContent').fadeOut();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c.formID+'"] #finalSlide .linkPrevious').fadeOut();wpe_finalStep(d)}}}function wpe_quantity_less(c,e){var a=jQuery(c).parent().parent().find(".icon_quantity");var b=parseFloat(jQuery(c).parent().data("min"));var d=parseInt(a.html());if(d>1&&d>b){d--;a.html(d);wpe_updatePrice(e)}}function wpe_quantity_more(c,e){var b=jQuery(c).parent().parent().find(".icon_quantity");var a=parseFloat(jQuery(c).parent().data("max"));var d=parseFloat(b.html());if(d<a||a==0){d++;b.html(d);wpe_updatePrice(e)}}function wpe_checkEmail(a){if(a.indexOf("@")!="-1"&&a.indexOf(".")!="-1"&&a!=""){return true}return false}function wpe_isIframe(){try{return window.self!==window.top}catch(a){return true}}function wpe_cloneSummary(d,c){var b=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_summary').clone();if(d){}if(b.find("#lfb_summaryDiscountTr").css("display")!="table-row"){b.find("#lfb_summaryDiscountTr").remove()}if(jQuery("body").is(".rtl")){b.css({textAlign:"right",direction:"rtl"});b.find("table").css({textAlign:"right",direction:"rtl"})}b.addClass("lfb-hidden");b.uniqueId();var a=4;if(form.summary_showAllPricesEmail=="1"){b.find(".lfb_hidePrice").removeClass("lfb_hidePrice").removeClass("lfb-hidden")}b.find("thead th").each(function(){if(jQuery(this).is(".lfb-hidden")){a--}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_summary').after(b);b.children("h4").remove();b.find("*").each(function(){jQuery(this).css({fontSize:jQuery(this).css("font-size"),padding:jQuery(this).css("padding"),textAlign:jQuery(this).css("text-align"),lineHeight:jQuery(this).css("line-height")})});if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_summary table thead > tr > th:eq(1)').is(".lfb-hidden")){b.find("table thead > tr > th:eq(1)").remove();b.find("table tbody td.lfb_valueTd").remove()}b.find("th.sfb_summaryStep").css({fontSize:22});b.find("th.sfb_summaryStep").attr("align","center");b.find("table").attr("width","90%");b.find("table").css("width","90%");b.find("table").attr("border","1");b.find("table").attr("bordercolor",lfb_rgb2hex(b.find("table").css("border-color")));b.find("table").attr("style","width:90%;margin:0 auto;");b.find("thead td, thead th").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(b.find("thead").css("background-color")));jQuery(this).css("background",lfb_rgb2hex(b.find("thead").css("background-color")))});b.find("td,th").each(function(){var e=(jQuery(this).width()*100)/b.find("table").width();jQuery(this).css("width",parseInt(e)+"%")});b.find("th.sfb_summaryStep").each(function(){jQuery(this).attr("bgcolor",lfb_rgb2hex(jQuery(this).css("background-color")))});b.find("td,th").each(function(){jQuery(this).attr("color",lfb_rgb2hex(jQuery(this).css("color")));jQuery(this).html('<span style="color: '+lfb_rgb2hex(jQuery(this).css("color"))+"; font-size: "+jQuery(this).css("font-size")+'">'+jQuery(this).html()+"</span>")});b.find("table .lfb-hidden").remove();b.find("table").attr("cellspacing","0");b.find("table").attr("cellpadding","8");b.find("table").attr("bgcolor","#FFFFFF");b.find("td,th").each(function(){jQuery(this).attr("align",jQuery(this).css("text-align"));jQuery(this).css("padding",jQuery(this).css("padding"))});b.find("thead > tr th:eq(0)").css({minWidth:500});if(form.summary_showAllPricesEmail=="1"){b.find(".sfb_summaryStep").attr("colspan",a);b.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",a-1)}if(a==3){b.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","164")});b.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","164")});b.find("tr>td:first-child").each(function(){jQuery(this).attr("width","340")});b.find("tr>th:first-child").each(function(){jQuery(this).attr("width","340")})}else{b.find("td:not(:first-child)").each(function(){jQuery(this).attr("width","103")});b.find("th:not(:first-child)").each(function(){jQuery(this).attr("width","103")});b.find("tr>td:first-child").each(function(){jQuery(this).attr("width","332")});b.find("tr>th:first-child").each(function(){jQuery(this).attr("width","332")})}b.find("*").each(function(){var e=lfb_rgb2hex(jQuery(this).css("color"));jQuery(this).css({color:""});jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+e);if(jQuery(this).attr("style").length>0){jQuery(this).attr("style",jQuery(this).attr("style")+";color:"+e)}else{jQuery(this).attr("style","color:"+e)}});b.find(".lfb_file").each(function(){jQuery(this).removeAttr("style");jQuery(this).removeAttr("data-tldinit")});b.html('<div id="lfb_summaryCt" style="padding-top: 24px;padding-bottom: 24px; text-align: center;">'+b.html()+"</div>");return b}function wpe_getContactInformations(d){var g=new Array();g.email="";g.phone="";g.firstName="";g.lastName="";g.address="";g.city="";g.state="";g.zip="";g.country="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="email"]').each(function(){if(jQuery(this).val().length>0&&wpe_checkEmail(jQuery(this).val())){g.email=jQuery(this).val()}});var f="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="phone"]').each(function(){if(jQuery(this).val().length>3){g.phone=jQuery(this).val()}});var i="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="firstName"]').each(function(){if(jQuery(this).val().length>0){g.firstName=jQuery(this).val()}});var j="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="lastName"]').each(function(){if(jQuery(this).val().length>0){g.lastName=jQuery(this).val()}});var h="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="address"]').each(function(){if(jQuery(this).val().length>0){g.address=jQuery(this).val()}});var e="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="city"]').each(function(){if(jQuery(this).val().length>0){g.city=jQuery(this).val()}});var a="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="state"]').each(function(){if(jQuery(this).val().length>0){g.state=jQuery(this).val()}});var b="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="zip"]').each(function(){if(jQuery(this).val().length>0){g.zip=jQuery(this).val()}});var c="";jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-fieldtype="country"]').each(function(){if(jQuery(this).val().length>0){g.country=jQuery(this).val()}});return g}function wpe_orderSend(m,c,n,l){var b=wpe_getForm(m);var q=wpe_getFormContent(m);var p=q[0];p=p.replace(/<br\/>/g,"[n]");var s=q[1];var i=q[2];if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"]').is("[data-subs]")){s+=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"]').attr("data-subs")}var d=0;var f=true;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"] [data-activatePaypal="true"]:not(:checked)').length>0){f=false}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"] #wtmt_paypalForm').is('[data-useipn="1"]')){d=1}var j=wpe_cloneSummary(false,m);var u=j.html();j.remove();var o=wpe_getContactInformations(m);n=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"] .emailField').val();if(wpe_checkEmail(o.email)){n=o.email}var x=parseFloat(b.price);var k=0;var v="";var r=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-formtitle");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is('[data-isSubs="true"]')){x=parseFloat(b.priceSingle);k=parseFloat(b.price);v=b.subscriptionText}var w="";if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] [name="stripeToken"]').length>0&&f){w=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] [name="stripeToken"]').val()}var h="";if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] [name="stripeTokenB"]').length>0&&f){h=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] [name="stripeTokenB"]').val()}var a=new Array();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide textarea').each(function(){if(jQuery(this).closest("#lfb_stripeForm").length==0&&jQuery(this).closest("#wtmt_paypalForm").length==0){a.push({fieldID:jQuery(this).prop("id").substr(6,9),value:wpe_nl2br(jQuery(this).val())})}});var f=1;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"] [data-activatePaypal="true"]:not(:checked)').length>0){f=0}var g="";if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captcha').length>0){g=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_captchaField').val()}if(typeof ga!=="undefined"){try{ga("set","page",location.pathname+"#Form+sent");ga("send","pageview")}catch(t){}}jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"send_email",formID:b.formID,informations:c,email:n,lastName:o.lastName,firstName:o.firstName,phone:o.phone,country:o.country,zip:o.zip,state:o.state,city:o.city,address:o.address,summary:u,stripeToken:w,stripeTokenB:h,totalTxt:s,email_toUser:b.email_toUser,usePaypalIpn:d,discountCode:b.discountCode,formSession:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_formSession').val(),total:x,totalSub:k,subFrequency:v,formTitle:r,contactSent:b.contactSent,contentTxt:p,items:i,fieldsLast:a,activatePaypal:f,captcha:g,useRtl:jQuery("body").is(".rtl"),finalUrl:lfb_getRedirectionURL(b.formID)},success:function(A){j.remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+m+'"] #lfb_loader').delay(1000).fadeOut();if(f&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').length>0&&(b.price>0||b.priceSingle>0)){var y=b.price;if(b.payMode=="percent"){y=parseFloat(y)*(parseFloat(b.percentToPay)/100)}else{if(b.payMode=="fixed"){y=parseFloat(b.fixedToPay)}}y=parseFloat(y).toFixed(2);if(b.priceSingle>0){var e=b.priceSingle;if(b.payMode=="percent"){e=parseFloat(e)*(parseFloat(b.percentToPay)/100)}else{if(b.payMode=="fixed"){e=parseFloat(b.fixedToPay)}}e=parseFloat(e).toFixed(2);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a1]').length==0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="a1" value="0"/>');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="p1" value="1"/>');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="t1" value="M"/>')}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a1]').val(e);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=p1]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=p3]').val());if(y<=0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=cmd]').val("_xclick");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a3]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=t3]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=p3]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=bn]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=no_note]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=src]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=t1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=p1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm').append('<input type="hidden" name="amount" value="'+e+'"/>')}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=t1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=p1]').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=amount]').val(y)}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=return]').val(lfb_getRedirectionURL(m));jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=a3]').val(y);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=custom]').val(A);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=item_number]').val(A);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=item_name]').val(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [name=item_name]').val()+" - "+A);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #wtmt_paypalForm [type="submit"]').trigger("click")}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').length>0&&b.price>0){var y=b.price;if(b.payMode=="percent"){y=parseFloat(y)*(parseFloat(b.percentToPay)/100)}else{if(b.payMode=="fixed"){y=parseFloat(b.fixedToPay)}}y=y.toFixed(2);y=y.replace(".","");if(f){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').show()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').hide()}wpe_finalStep(m)}else{if(!b.save_to_cart&&!b.save_to_cart_edd){wpe_finalStep(m)}}}if(b.save_to_cart_edd){var z=new Array();jQuery.each(lfb_lastSteps,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+m+'"] #mainPanel .genSlide[data-stepid="'+this+'"]');$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var B=1;if(parseInt(jQuery(this).data("resqt"))>0){B=parseInt(jQuery(this).data("resqt"))}if(jQuery(this).is('[data-type="slider"]')){B=parseInt(jQuery(this).slider("value"));if(!isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))){B=parseInt(jQuery(this).find(".tooltip-inner").html())}}if(parseInt(jQuery(this).data("prodid"))>0){z.push({quantity:B,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).data("eddvar"))})}})});jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_cartdd_save",products:z},success:function(){wpe_finalStep(m)}})}if(b.save_to_cart){var z=new Array();jQuery.each(lfb_lastSteps,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+m+'"] #mainPanel .genSlide[data-stepid="'+this+'"]');$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var B=1;if(parseInt(jQuery(this).data("resqt"))>0){B=parseInt(jQuery(this).data("resqt"))}if(jQuery(this).is('[data-type="slider"]')){B=parseInt(jQuery(this).slider("value"));if(!isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))){B=parseInt(jQuery(this).find(".tooltip-inner").html())}}if(parseInt(jQuery(this).data("prodid"))>0){z.push({quantity:B,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar"))})}})});jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_cart_save",ref:A,products:z},success:function(){wpe_finalStep(m)}})}}})}function lfb_checkLastStepFields(c){var b=wpe_getForm(c);var a=true;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide input[type=text],#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide input[type=email], #estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #finalSlide textarea').each(function(){if(jQuery(this).closest("#lfb_stripeForm").length==0&&jQuery(this).closest("#wtmt_paypalForm").length==0){if(jQuery(this).is(".lfb_disabled")){}else{if(jQuery(this).attr("data-required")&&jQuery(this).attr("data-required")=="true"&&jQuery(this).val().length<1){a=false;jQuery(this).closest(".form-group").addClass("has-error");if(!jQuery(this).is("#lfb_captchaField")){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is(".wpe_fullscreen")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}else{if(b.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},b.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}}}}if(jQuery(this).is(".emailField")&&!wpe_checkEmail(jQuery(this).val())){a=false;jQuery(this).closest(".form-group").addClass("has-error");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is(".wpe_fullscreen")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}else{if(b.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},b.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:jQuery(this).parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}}}}}});return a}function wpe_order(f){var e=wpe_getForm(f);var b=true;var d="";var c="";var a=new Array();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide .form-group').removeClass("has-error");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide').find('.lfb_item input:not([type="checkbox"]),.lfb_item textarea,.lfb_item select').each(function(){if(jQuery(this).closest("#lfb_stripeForm").length==0&&jQuery(this).closest("#wtmt_paypalForm").length==0){if(jQuery(this).is(".lfb_disabled")){}else{if(jQuery(this).is("#lfb_couponField")){}else{if(jQuery(this).is("#lfb_captchaField")){}else{var g=":";if(jQuery(this).closest(".lfb_item").find("label").html().lastIndexOf(":")==jQuery(this).closest(".lfb_item").find("label").html().length-1){g=""}if(jQuery("body").is(".rtl")){d+="<p><b>"+jQuery(this).val()+"</b>"+g+" "+jQuery(this).closest(".lfb_item").find("label").html()+"</p>"}else{d+="<p>"+jQuery(this).closest(".lfb_item").find("label").html()+" "+g+" <b>"+jQuery(this).val()+"</b></p>"}}}}}});b=lfb_checkStepItemsValid("final",f);if(e.legalNoticeEnable==1){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_legalCheckbox').is(":checked")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_legalCheckbox').closest(".form-group").addClass("has-error");b=false}}if(b==true){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_captcha').length>0){jQuery.ajax({url:e.ajaxurl,type:"post",data:{action:"lfb_checkCaptcha",formID:f,captcha:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_captchaField').val()},success:function(g){if(g=="1"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide').find("#wpe_btnOrder,.linkPrevious").fadeOut(250);wpe_uploadFiles(f,d,c,a)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #lfb_captchaField').closest(".form-group").addClass("has-error")}}})}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] #finalSlide').find("#wpe_btnOrder,.linkPrevious").fadeOut(250);wpe_uploadFiles(f,d,c,a)}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #lfb_stripeForm .btn').prop("disabled",false)}}function wpe_previousStep(g){var e=wpe_getForm(g);var b=navigator.userAgent.toLowerCase();var f=b.match(/(iPad|iPhone|iPod)/i);if(f){jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+e.formID+'"] > .tooltip').remove()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e.formID+'"] .errorMsg').hide();jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),false,g)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),false,g)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+e.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")});var a=false;var d=0;var c=0;jQuery.each(lfb_lastSteps,function(h){var j=this;if(parseInt(j)==parseInt(e.step)){a=true}if(!a){if((jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+j+'"] .lfb_item:not(.lfb-hidden)').length>0||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+j+'"] .lfb_distanceError').length>0)&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+j+'"]').is(".lfb_disabled")){d=j;c=h}}});lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(j,h){if(h<=c){return(j)}});wpe_changeStep(d,g)}function lfb_returnToStep(f,e){var b=wpe_getForm(e);if(f!=b.step){var a=navigator.userAgent.toLowerCase();var d=a.match(/(iPad|iPhone|iPod)/i);if(d){jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+b.formID+'"] > .tooltip').remove()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] .errorMsg').hide();jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("a.lfb_button.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),false,e)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("div.selectable.checked:not(.prechecked)").each(function(){wpe_itemClick(jQuery(this),false,e)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find('input[data-toggle="switch"]:checked:not(.prechecked)').each(function(){jQuery(this).trigger("click.auto")});var c=lfb_lastSteps.indexOf(f);lfb_lastSteps=jQuery.grep(lfb_lastSteps,function(h,g){if(g<=c){return(h)}});wpe_changeStep(f,e);setTimeout(function(){wpe_updateSummary(e,true)},350)}}function wpe_uploadFiles(e,c,b,a){var d=wpe_getForm(e);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').is(".wpe_fullscreen")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').css("overflow-y","hidden");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').animate({scrollTop:0},d.animationsSpeed*2)}else{if(d.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},d.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').offset().top-(80+parseInt(d.scrollTopMargin))},d.animationsSpeed*2)}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] .lfb_btnFloatingSummary').fadeOut(d.animationsSpeed);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_floatingSummary').fadeOut(d.animationsSpeed);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #lfb_loader').fadeIn(d.animationsSpeed*2);setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel').fadeOut(d.animationsSpeed*2);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #startInfos').fadeOut(d.animationsSpeed*2);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #genPrice').fadeOut(d.animationsSpeed*2);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .genSlide').fadeOut(d.animationsSpeed*2);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .btn-next').fadeOut(d.animationsSpeed);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #mainPanel .lfb_btnNextContainer').fadeOut(d.animationsSpeed);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #finalText').css({opacity:0,display:"block"});setTimeout(function(){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').is(".wpe_fullscreen")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').animate({scrollTop:0},d.animationsSpeed*2)}else{if(d.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},d.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"]').offset().top-(80+parseInt(d.scrollTopMargin))},d.animationsSpeed*2)}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+e+'"] #finalText').animate({opacity:1},d.animationsSpeed*2)},d.animationsSpeed*4+50)},d.animationsSpeed*2+50);wpe_orderSend(e,c,b,a)}function wpe_isAnyParentFixed(a,b){if(!b){var b=false}try{if(a.parent().length>0&&a.parent().css("position")=="fixed"){b=true}}catch(c){}if(!b&&a.parent().length>0){b=wpe_isAnyParentFixed(a.parent(),b)}return b}function wpe_is_touch_device(){return(("ontouchstart" in window)||(navigator.MaxTouchPoints>0)||(navigator.msMaxTouchPoints>0))}function lfb_toggleFloatingSummary(a){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_floatingSummary').is(".lfb_open")){lfb_closeFloatingSummary(a)}else{lfb_showFloatingSummary(a)}}function lfb_closeFloatingSummary(a){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_floatingSummary').removeClass("lfb_open");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_floatingSummary').stop().slideUp()}function lfb_showFloatingSummary(a){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_floatingSummary').addClass("lfb_open");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"] #lfb_floatingSummary').stop().slideDown()}function wpe_updateFloatingSummary(b){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_floatingSummary').length>0){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_summary').clone();if(a.find("tbody").children(":not(.lfb_static)").length==0&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')){lfb_closeFloatingSummary(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] .lfb_btnFloatingSummary:not(.disabled)').addClass("disabled")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] .lfb_btnFloatingSummary').removeClass("disabled");a.find("h4").remove();a.attr("id","lfb_floatingSummaryContent");a.removeClass("lfb-hidden");a.find(".lfb_valueTd,.lfb_valueTh").addClass("lfb-hidden");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_floatingSummary').is('[data-hideprices="1"]')){a.find(".lfb_priceTd,.lfb_priceTh").addClass("lfb-hidden");a.find("#lfb_summaryDiscountTr,#sfb_summaryTotalTr").addClass("lfb-hidden")}a.find(".sfb_summaryStep").attr("colspan",a.find("thead th:not(.lfb-hidden)").length);a.find("tr.lfb_noPriceRow").remove();a.find("#lfb_summaryDiscountTr>th:eq(0),#sfb_summaryTotalTr>th:eq(0)").attr("colspan",a.find("thead th:not(.lfb-hidden)").length-1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_floatingSummary #lfb_floatingSummaryInner').html(a);a.find(".sfb_summaryStep").click(function(){var c=parseInt(jQuery(this).attr("data-step"));lfb_returnToStep(c,b)});if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_floatingSummary').is('[data-numberstep="1"]')){a.find(".sfb_summaryStep").each(function(c){var d=c+1;jQuery(this).find("strong").html(d+". "+jQuery(this).find("strong").html())})}}}}function wpe_updateSummary(q,e){var b=wpe_getForm(q);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary').length>0||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_floatingSummary').length>0){var r=true;if(e){r=false}var n=wpe_getFormContent(q,r);var p=n[2];var h=-1;var o=false;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr:not(.lfb_static)').remove();var i="";if(b.summary_hidePrices==1){i="lfb-hidden lfb_hidePrice"}jQuery.each(p,function(){var B=this;if(B.label!=undefined&&B.label!=""&&B.label!="undefined"){if(isNaN(B.stepid)){B.stepid="final"}if(B.stepid!="final"||b.summary_hideFinalStep!="1"){if(B.stepid!=h){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr><th colspan="4" class="sfb_summaryStep" data-step="'+B.stepid+'"><strong>'+B.step+"</strong></th>")}h=B.stepid;if(isNaN(B.quantity)){B.quantity=1}var z="";if(isNaN(B.price)){z="lfb_noPriceRow";B.price=0}var A=B.value;if(B.value===undefined){A=""}else{z+=" lfb_infoRow"}if(A!=""&&B.showInSummary){o=true}var C=B.price;var x=B.quantity;if(A!=""&&C==0&&x==1){x="";C=""}else{var u=false;if(parseFloat(C)<0){u=true;C*=-1}if(b.currencyPosition=="left"){C=b.currency+""+wpe_formatPrice(parseFloat(C).toFixed(2),q)}else{C=wpe_formatPrice(parseFloat(C).toFixed(2),q)+""+b.currency}if(u){C="- "+C}}var v="";if(B.isFile){}var w="";if(b.summary_hideQt==1){w="lfb-hidden"}if(b.summary_hideZero==1&&B.price==0){C=""}var y="";if(!B.showInSummary){y="lfb-hidden"}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] [data-itemid="'+B.itemid+'"]').is('[data-hideqtsum="true"]')){x=""}if(b.priceSingle>0&&!B.isSinglePrice&&(C!=""||C>0)){C+=" "+b.subscriptionText}if(b.price<=0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary .lfb_subTxt').addClass("lfb-hidden")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary .lfb_subTxt').removeClass("lfb-hidden")}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody #lfb_summaryDiscountTr').before('<tr data-itemstep="'+B.stepid+'" class="'+z+" "+y+'"><td>'+B.label+'</td><td class="lfb_valueTd '+v+'">'+A+'</td><td class="lfb_quantityTd '+w+'">'+x+'</td><td class="lfb_priceTd '+i+'">'+C+"</td></tr>")}}});if(b.reductionResult>0){var c=parseFloat(b.reductionResult).toFixed(2)+b.currency;if(b.currencyPosition=="left"){c=b.currency+parseFloat(b.reductionResult).toFixed(2)}c="-"+c;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary #lfb_summaryDiscount>span').html(c);if(!b.discountCodeDisplayed){var j=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html();if(j.indexOf("<i>")<0){if(j.substr(j.length-1,1)==":"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(j.substr(0,j.length-1)+" <i>("+b.discountCode+")</i> :")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary #lfb_summaryDiscountTr th[colspan]').html(j+" <i>("+b.discountCode+")</i>")}}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary #lfb_summaryDiscountTr').slideDown();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_floatingSummary #lfb_summaryDiscountTr').slideDown()}if(!b.price||b.price<0){b.price=0}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tr th.sfb_summaryStep').each(function(){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tr[data-itemstep="'+jQuery(this).attr("data-step")+'"]:not(.lfb-hidden)').length==0){jQuery(this).parent().addClass("lfb-hidden")}});var m=b.currency+""+wpe_formatPrice(parseFloat(b.price).toFixed(2),q);var k=b.currency+""+wpe_formatPrice(parseFloat(b.priceSingle).toFixed(2),q);if(b.currencyPosition!="left"){m=wpe_formatPrice(parseFloat(b.price).toFixed(2),q)+""+b.currency;k=wpe_formatPrice(parseFloat(b.priceSingle).toFixed(2),q)+""+b.currency}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(m);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is("[data-totalrange]")&&parseFloat(b.price)>0){var t=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-rangelabelbetween");var s=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-rangelabeland");var l=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-totalrange"));var f=(parseFloat(b.price)-l/2);var g=parseFloat(b.price)+l/2;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is('[data-rangemode="percent"]')){var a=parseFloat();f=parseFloat(b.price)-((parseFloat(b.price)*l)/100);g=parseFloat(b.price)+((parseFloat(b.price)*l)/100)}if(f<0){f=0}if(g<0){g=0}formatedPrice=t+"<strong>"+b.currency+""+wpe_formatPrice(f,q)+"</strong>"+s+"<strong>"+b.currency+""+wpe_formatPrice(g,q)+"</strong>";if(b.currencyPosition!="left"){var l=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').attr("data-totalrange"));formatedPrice=t+"<strong>"+wpe_formatPrice(f,q)+b.currency+"</strong>"+s+"<strong>"+wpe_formatPrice(parseFloat(b.price)+l/2,q)+b.currency+"</strong>"}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(formatedPrice)}var d=4;if(b.summary_hideQt==1){d-=1}if(b.summary_hidePrices==1){d-=1}if(!o){d-=1;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table td.lfb_valueTd').hide();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table thead th:eq(1)').hide().addClass("lfb-hidden");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr#sfb_summaryTotalTr th[colspan]').attr("colspan",d-1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr#lfb_summaryDiscountTr th[colspan]').attr("colspan",d-1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr th.sfb_summaryStep').attr("colspan",d)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table thead th:eq(1)').show().removeClass("lfb-hidden");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr:eq(1)').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody td.lfb_valueTd').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr#sfb_summaryTotalTr th[colspan]').attr("colspan",d-1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr#lfb_summaryDiscountTr th[colspan]').attr("colspan",d-1);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+q+'"] #lfb_summary table tbody tr th.sfb_summaryStep').attr("colspan",d)}}wpe_updateFloatingSummary(q)}function wpe_changeStep(o,f){var b=wpe_getForm(f);jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+b.formID+'"] > .tooltip').remove();if(b.intro_enabled>0||b.step>0){var h=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"]  #genPrice').offset().top-100;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"]').is(".wpe_fullscreen")){h=0;if(b.intro_enabled>0){h=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #startInfos').height()+100}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"]').animate({scrollTop:h},250)}else{if(jQuery("header").length>0&&wpe_isAnyParentFixed(jQuery("header"))){h-=jQuery("header").height()}h-=(48+parseInt(b.scrollTopMargin));if(b.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},b.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:h},250)}}}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] .quantityBtns').removeClass("open");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] .quantityBtns').fadeOut(b.animationsSpeed/4);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide').fadeOut(b.animationsSpeed*2);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .btn-next').fadeOut(b.animationsSpeed/2);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .lfb_btnNextContainer').fadeOut(b.animationsSpeed/2);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .linkPrevious').fadeOut(b.animationsSpeed/2);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .lfb_distanceError').fadeOut(b.animationsSpeed/2);if(o=="final"){wpe_updateSummary(f);var p=true;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] [data-activatePaypal="true"]:not(:checked)').length>0){p=false}if(p){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').find(".form-group,.payment-errors").show()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"] #lfb_stripeForm').find(".form-group,.payment-errors").hide()}}else{wpe_updateFloatingSummary()}var m=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').find("h2.stepTitle");var d=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').find("p.lfb_stepDescription");var a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').find(".genContent");var n=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').find(".lfb_totalBottomContainer");a.find(".genContentSlide").removeClass("active");a.find(".genContentSlide").eq(0).addClass("active");a.animate({opacity:0},b.animationsSpeed);d.animate({opacity:0},b.animationsSpeed);m.removeClass("positioned");m.css({"-webkit-transition":"none",transition:"none"});n.animate({opacity:0},b.animationsSpeed);if(typeof ga!=="undefined"){try{ga("set","page",location.pathname+"#"+encodeURIComponent(m.html()).replace(/%20/g,"+"));ga("send","pageview")}catch(k){}}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').css("opacity",0).show();var i=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] h2.stepTitle').height();var c=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').outerHeight()+160+i;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').hide().css("opacity",1);var l=b.animationsSpeed*4.5;if(b.step==1){wpe_initPanelResize(f);l=b.animationsSpeed*2.5;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').fadeIn(b.animationsSpeed*2)}else{jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').delay(b.animationsSpeed*2).fadeIn(b.animationsSpeed*2)}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #finalSlide .estimation_project').length>0){var g=wpe_getFormContent(f);var j=g[3];jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #finalSlide .estimation_project textarea').val(j);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #finalSlide .estimation_total input').val(b.price)}setTimeout(function(){c=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').outerHeight()+160+i;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel').css("min-height",c);m.css({"-webkit-transition":"all 0.3s ease-out",transition:"all 0.3s ease-out"}).addClass("positioned");a.css({paddingTop:d.height()+m.height()+70});a.delay(b.animationsSpeed*2).animate({opacity:1},b.animationsSpeed);d.delay(b.animationsSpeed).animate({opacity:1,top:m.height()+60},b.animationsSpeed);n.delay(b.animationsSpeed*2).animate({opacity:1},b.animationsSpeed);if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').is(".lfb_disabledBtn")){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').css("display","inline-block").hide();setTimeout(function(){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').is(".lfb_disabledBtn")){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').fadeIn(500);setTimeout(function(){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').is(".lfb_disabledBtn")){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').hide()}},550)}},b.animationsSpeed*2)}else{jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .btn-next').hide()}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .lfb_btnNextContainer').fadeIn(500);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .linkPrevious').delay(b.animationsSpeed*3).fadeIn(500);jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .lfb_distanceError').delay(b.animationsSpeed*3).fadeIn(500);if(b.disableTipMobile==0||!wpe_is_touch_device()){var e=navigator.userAgent.toLowerCase();var q=e.match(/(iPad|iPhone|iPod)/i);if(q){a.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:true,container:"#estimation_popup",trigger:"manual"})}else{a.delay(750).find('[data-toggle="tooltip"]').b_tooltip({html:true,container:"#estimation_popup"})}a.on("enter",function(){if(this.options.trigger=="hover"&&"ontouchstart" in document.documentElement){return}})}setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide.lfb_activeStep').removeClass("lfb_activeStep");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').addClass("lfb_activeStep");a.find(".wpe_itemQtField").each(function(){if(jQuery(this).parent().next().is(".itemDes")){jQuery(this).css({marginTop:20+jQuery(this).parent().next().outerHeight()})}});b.step=o;setTimeout(function(){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+f+'"] #mainPanel .genSlide[data-stepid="'+o+'"]').find('[data-usedistance="true"]').each(function(){lfb_removeDistanceError(jQuery(this).attr("data-itemid"),f)},100);jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+f+'"] > .tooltip').remove();setTimeout(function(){jQuery(window).trigger("resize")},100)},(b.animationsSpeed*2)+550);wpe_updatePrice(f);if(b.backFomFinal){b.backFomFinal=false}},300)},l);jQuery("#estimation_popup :not(.ui-slider-handle) > .tooltip").remove();jQuery("body > .tooltip").remove();jQuery('#estimation_popup[data-form="'+f+'"] > .tooltip').remove();wpe_updatePrice(f)}function wpe_findPotentialsSteps(e,g){var c=wpe_getForm(g);var b=new Array();var a=new Array();var d=new Array();var f=0;jQuery.each(c.links,function(){var j=this;if(j.originID==e){var i=false;var h=true;if(j.conditions&&j.conditions!="[]"){j.conditionsO=JSON.parse(j.conditions);var k=lfb_checkConditions(j.conditionsO,g,e);i=k.error;h=k.errorOR}else{d.push(j.destinationID);h=false}if((j.operator=="OR"&&!h)||(j.operator!="OR"&&!i)){j.conditionsO=JSON.parse(j.conditions);a.push({stepID:parseInt(j.destinationID),nbConditions:j.conditionsO.length});if(j.conditionsO.length>f){f=j.conditionsO.length}b.push(parseInt(j.destinationID))}}});if(e==0){b.push(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"]  #mainPanel .genSlide[data-start="1"]').attr("data-stepid")))}if(b.length==0){b.push("final")}else{if(d.length>0&&d.length<b.length){jQuery.each(d,function(){var h=this;b=jQuery.grep(b,function(i){return i!=h})});if(f>0){jQuery.each(b,function(h){jQuery.each(a,function(i){if(i.stepID==h&&i.nbConditions<f){b=jQuery.grep(b,function(j){return j!=h})}})})}}}return b}function lfb_checkConditions(e,d,b){var c=false;var a=true;jQuery.each(e,function(){var j=this;if(j.interaction.substr(0,1)!="_"){var o=j.interaction.substr(0,j.interaction.indexOf("_"));if(o==0){o="final"}var g=j.interaction.substr(j.interaction.indexOf("_")+1,j.interaction.length);var q=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #mainPanel .genSlide[data-stepid="'+o+'"] .genContent [data-itemid="'+g+'"]');if(q.is(".lfb_disabled")||q.closest(".genSlide").is(".lfb_disabled")){if(j.action!="unclicked"){c=true}else{a=false}}else{if(j.value&&j.value.indexOf("_")>-1){if(j.value.substr(0,1)!="_"){var m=j.value.substr(0,j.value.indexOf("_"));var h=j.value.substr(j.value.indexOf("-")+1,j.value.length);if(m==0){m="final"}var p=j.value.substr(j.value.indexOf("_")+1,j.value.indexOf("-")-(j.value.indexOf("_")+1));var k=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #mainPanel .genSlide[data-stepid="'+m+'"] .genContent [data-itemid="'+p+'"]');if(k.length>0){if(h==""){j.value=parseFloat(k.data("resprice"))}else{if(h=="quantity"){if(k.find(".wpe_qtfield").length>0){j.value=parseInt(k.find(".wpe_qtfield").val())}else{j.value=parseInt(k.find(".icon_quantity").html())}}else{if(h=="value"){j.value=k.val();if(k.is(".lfb_datepicker")){j.value=jQuery.datepicker.formatDate("yy-mm-dd",k.datepicker("getDate"))}j.value=j.value.replace(/\`/g,"'")}}}}}else{if(j.value=="_total"){j.value=form.price}else{if(j.value=="_total_qt"){j.value=wpe_getTotalQuantities(d,b)}}}}else{if(j.value){j.value=j.value.replace(/\`/g,"'")}}switch(j.action){case"clicked":if(q.is('[type="checkbox"]')){if(!q.is(":checked")){c=true}if(q.is(":checked")){a=false}}else{if(!q.is(".checked")&&!q.is(":checked")){c=true}if(q.is(".checked")||q.is(":checked")){a=false}}break;case"unclicked":if(q.is(':not([type="checkbox"]).checked')||q.is(":checked")){c=true}if(!q.is(':not([type="checkbox"]).checked')&&!q.is(":checked")){a=false}break;case"filled":if(q.is(".lfb_dropzone")){if(q.find(".dz-preview[data-file].dz-success.dz-complete").length==0){c=true}else{a=false}}else{if(q.val().length==0){c=true}else{a=false}}break;case"equal":if(q.val()!=j.value){c=true}else{a=false}break;case"different":if(q.val()==j.value){c=true}else{a=false}break;case"PriceSuperior":var l=parseFloat(q.data("resprice"));if(q.is(".lfb_button:not(.checked)")||q.is(".selectable:not(.checked)")||q.is("input[type=checkbox]:not(:checked)")||l<=j.value){c=true}if((q.is(".checked")||q.is(":checked"))&&l>j.value){a=false}break;case"PriceInferior":var l=parseFloat(q.data("resprice"));if(q.is(".lfb_button:not(.checked)")||q.is(".selectable:not(.checked)")||q.is("input[type=checkbox]:not(:checked)")||l>=j.value){c=true}if((q.is(".checked")||q.is(":checked"))&&l<j.value){a=false}break;case"PriceEqual":var l=parseFloat(q.data("resprice"));if(q.is(".lfb_button:not(.checked)")||q.is(".selectable:not(.checked)")||q.is("input[type=checkbox]:not(:checked)")||l!=j.value){c=true}if((q.is(".checked")||q.is(":checked"))&&l==j.value){a=false}break;case"PriceDifferent":var l=parseFloat(q.data("resprice"));if(q.is(".lfb_button:not(.checked)")||q.is(".selectable:not(.checked)")||q.is("input[type=checkbox]:not(:checked)")||l==j.value){c=true}if((q.is(".checked")||q.is(":checked"))&&l!=j.value){a=false}break;case"QtSuperior":if(q.is(".selectable:not(.checked)")||(q.find(".icon_quantity").length>0&&parseInt(q.find(".icon_quantity").html())<=j.value)||(q.find(".wpe_qtfield").length>0&&parseInt(q.find(".wpe_qtfield").val())<=j.value)||(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))<=j.value)){c=true}if(q.is(".selectable")){if(q.is(".selectable.checked")&&(parseInt(q.find(".icon_quantity").html())>j.value)||(parseInt(q.find(".wpe_qtfield").val())>j.value)){a=false}}else{if(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))>j.value){a=false}}if(q.is("input")){if(parseInt(q.val())<=j.value){c=true}if(parseInt(q.val())>j.value){a=false}}break;case"QtInferior":if(q.is(".selectable:not(.checked)")||(q.find(".icon_quantity").length>0&&parseInt(q.find(".icon_quantity").html())>=j.value)||(q.find(".wpe_qtfield").length>0&&parseInt(q.find(".wpe_qtfield").val())>=j.value)||(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))>=j.value)){c=true}if(q.is(".selectable")){if(q.is(".selectable.checked")&&(parseInt(q.find(".icon_quantity").html())<j.value)||(parseInt(q.find(".wpe_qtfield").val())<j.value)){a=false}}else{if(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))<j.value){a=false}}if(q.is("input")){if(parseInt(q.val())>=j.value){c=true}if(parseInt(q.val())<j.value){a=false}}break;case"QtEqual":if(q.is(".selectable:not(.checked)")||(q.find(".icon_quantity").length>0&&parseInt(q.find(".icon_quantity").html())!=j.value)||(q.find(".wpe_qtfield").length>0&&parseInt(q.find(".wpe_qtfield").val())!=j.value)||(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))!=j.value)){c=true}if(q.is(".selectable")){if(q.is(".selectable.checked")&&(parseInt(q.find(".icon_quantity").html())==j.value)||(parseInt(q.find(".wpe_qtfield").val())==j.value)){a=false}}else{if(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))==j.value){a=false}}if(q.is("input")){if(parseInt(q.val())!=j.value){c=true}if(parseInt(q.val())==j.value){a=false}}break;case"QtDifferent":if(q.is(".selectable:not(.checked)")||(q.find(".icon_quantity").length>0&&parseInt(q.find(".icon_quantity").html())==j.value)||(q.find(".wpe_qtfield").length>0&&parseInt(q.find(".wpe_qtfield").val())==j.value)||(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))==j.value)){c=true}if(q.is(".selectable")){if(q.is(".selectable.checked")&&(parseInt(q.find(".icon_quantity").html())!=j.value)||(parseInt(q.find(".wpe_qtfield").val())!=j.value)){a=false}}else{if(q.is('[data-type="slider"]')&&q.is(".ui-slider")&&parseInt(q.slider("value"))!=j.value){a=false}}if(q.is("input")){if(parseInt(q.val())==j.value){c=true}if(parseInt(q.val())!=j.value){a=false}}break;case"superior":if(q.is(".lfb_datepicker")){if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))<=j.value){c=true}if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))>j.value){a=false}}else{if(q.is(".lfb_timepicker")){var s=parseInt(j.value.substr(0,j.value.indexOf(":")));var n=parseInt(j.value.substr(j.value.indexOf(":")+1,2));if(j.value.indexOf("PM")>0&&s!=12){s+=12}var i=parseInt(q.val().substr(0,q.val().indexOf(":")));var f=parseInt(q.val().substr(q.val().indexOf(":")+1,2));if(q.val().indexOf("PM")>0&&i!=12){i+=12}if(i<s||(i==s&&f<=n)){c=true}if(i>s||(i==s&&f>n)){a=false}}else{if(q.is('input[type="number"]')){if(parseFloat(q.val())<=parseFloat(j.value)){c=true}if(parseFloat(q.val())>parseFloat(j.value)){a=false}}}}break;case"inferior":if(q.is(".lfb_datepicker")){if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))>=j.value){c=true}if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))<j.value){a=false}}else{if(q.is(".lfb_timepicker")){var s=parseInt(j.value.substr(0,j.value.indexOf(":")));var n=parseInt(j.value.substr(j.value.indexOf(":")+1,2));if(j.value.indexOf("PM")>0&&s!=12){s+=12}var i=parseInt(q.val().substr(0,q.val().indexOf(":")));var f=parseInt(q.val().substr(q.val().indexOf(":")+1,2));if(q.val().indexOf("PM")>0&&i!=12){i+=12}if(i>s||(i==s&&f>=n)){c=true}if(i<s||(i==s&&f<n)){a=false}}else{if(q.is('input[type="number"]')){if(parseFloat(q.val())>=parseFloat(j.value)){c=true}if(parseFloat(q.val())<parseFloat(j.value)){a=false}}}}break;case"equal":if(q.is(".lfb_datepicker")){if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))!=j.value){c=true}if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))==j.value){a=false}}else{if(q.is(".lfb_timepicker")){var s=parseInt(j.value.substr(0,j.value.indexOf(":")));var n=parseInt(j.value.substr(j.value.indexOf(":")+1,2));if(j.value.indexOf("PM")>0&&s!=12){s+=12}var i=parseInt(q.val().substr(0,q.val().indexOf(":")));var f=parseInt(q.val().substr(q.val().indexOf(":")+1,2));if(q.val().indexOf("PM")>0&&i!=12){i+=12}if(i!=s){c=true}if(i==s){a=false}}else{if(q.is('input[type="number"]')){if(parseFloat(q.val())!=parseFloat(j.value)){c=true}if(parseFloat(q.val())==parseFloat(j.value)){a=false}}}}break;case"different":if(q.is(".lfb_datepicker")){if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))==j.value){c=true}if(jQuery.datepicker.formatDate("yy-mm-dd",q.datepicker("getDate"))!=j.value){a=false}}else{if(q.is(".lfb_timepicker")){var s=parseInt(j.value.substr(0,j.value.indexOf(":")));var n=parseInt(j.value.substr(j.value.indexOf(":")+1,2));if(j.value.indexOf("PM")>0&&s!=12){s+=12}var i=parseInt(q.val().substr(0,q.val().indexOf(":")));var f=parseInt(q.val().substr(q.val().indexOf(":")+1,2));if(q.val().indexOf("PM")>0&&i!=12){i+=12}if(i==s){c=true}if(i!=s){a=false}}else{if(q.is('input[type="number"]')){if(parseFloat(q.val())==parseFloat(j.value)){c=true}if(parseFloat(q.val())!=parseFloat(j.value)){a=false}}}}break}}}else{if(j.interaction=="_total"){switch(j.action){case"superior":if(parseFloat(form.price)<=parseFloat(j.value)){c=true}if(parseFloat(form.price)>parseFloat(j.value)){a=false}break;case"inferior":if(parseFloat(form.price)>=parseFloat(j.value)){c=true}if(parseFloat(form.price)<parseFloat(j.value)){a=false}break;case"equal":if(parseFloat(form.price)!=parseFloat(j.value)){c=true}if(parseFloat(form.price)==parseFloat(j.value)){a=false}break;case"equal":if(parseFloat(form.price)==parseFloat(j.value)){c=true}if(parseFloat(form.price)!=parseFloat(j.value)){a=false}break}}else{if(j.interaction=="_total_qt"){var r=wpe_getTotalQuantities(d,b);switch(j.action){case"superior":if(r<=j.value){c=true}if(r>j.value){a=false}break;case"inferior":if(r>=j.value){c=true}if(form.price<j.value){a=false}break;case"equal":if(r!=j.value){c=true}if(r==j.value){a=false}break;case"different":if(r==j.value){c=true}if(r!=j.value){a=false}break}}}}});return{error:c,errorOR:a}}function lfb_scrollToItem(a,d,c){if(d=="final"){var b=wpe_getForm(c);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').is(".wpe_fullscreen")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b.formID+'"]').animate({scrollTop:a.parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}else{if(b.scrollTopPage=="1"){jQuery("body,html").animate({scrollTop:0},b.animationsSpeed*2)}else{jQuery("body,html").animate({scrollTop:a.parent().offset().top-(80+parseInt(b.scrollTopMargin))},b.animationsSpeed*2)}}}}function lfb_checkStepItemsValid(c,b){var a=true;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find(".has-error").removeClass("has-error");jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find(".icon_select.lfb_error").removeClass("lfb_error");jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find("input[type=text]:not(.lfb_disabled)").each(function(){if(jQuery(this).closest("#lfb_stripeForm").length==0&&jQuery(this).closest("#wtmt_paypalForm").length==0){if(jQuery(this).is('[data-required="true"]')&&jQuery(this).val().length<1){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}if(jQuery(this).is('[data-validation="phone"]')&&jQuery(this).val().length>0&&(jQuery(this).val().length<5||/^(?:(?:\(?(?:00|\+)([1-4]\d\d|[1-9]\d?)\)?)?[\-\.\ \\\/]?)?((?:\(?\d{1,}\)?[\-\.\ \\\/]?){0,})(?:[\-\.\ \\\/]?(?:#|ext\.?|extension|x)[\-\.\ \\\/]?(\d+))?$/i.test(jQuery(this).val())==false)){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}else{if(jQuery(this).is('[data-validation="email"]')&&jQuery(this).val().length>0&&!wpe_checkEmail(jQuery(this).val())){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}else{if(jQuery(this).is('[data-validation="fill"]')&&jQuery(this).val().length==0){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}else{if(jQuery(this).is('[data-validation="custom"]')&&jQuery(this).val().length>0){var d=false;if(parseInt(jQuery(this).attr("data-validmin"))>0&&jQuery(this).val().length<parseInt(jQuery(this).attr("data-validmin"))){d=true}if(parseInt(jQuery(this).attr("data-validmax"))>0&&jQuery(this).val().length>parseInt(jQuery(this).attr("data-validmax"))){d=true}if(jQuery(this).attr("data-validcar")!=""){var f=jQuery(this);if(jQuery(this).attr("data-validcar").indexOf(",")>-1){var e=jQuery(this).attr("data-validcar").split(",");jQuery.each(e,function(){if(f.val().indexOf(this)==-1){d=true}})}else{if(f.val().indexOf(jQuery(this).attr("data-validcar"))==-1){d=true}}}if(d){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}}}}}}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){if(jQuery(this).val().length<jQuery(this).attr("minlength")){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('select[data-required="true"]:not(.lfb_disabled)').each(function(){if(jQuery(this).is('[data-firstvaluedisabled="true"]')&&((!jQuery(this).is(".lfb_selectpicker")&&jQuery(this).find("option:selected").index()==0)||((jQuery(this).is(".lfb_selectpicker")&&jQuery(this).find("option:selected").index()==1)))){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find("input[type=text][minlength]:not(.lfb_disabled)").each(function(){if(jQuery(this).val().length<jQuery(this).attr("minlength")){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('input[type=number][data-required="true"]:not(.lfb_disabled)').each(function(){if(jQuery(this).val()==""||jQuery(this).val()==0){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('.lfb_dropzone[data-required="true"]:not(.lfb_disabled)').each(function(){if(jQuery(this).find(".dz-preview[data-file].dz-success.dz-complete").length==0){a=false;jQuery(this).parent().addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('textarea[data-required="true"]:not(.lfb_disabled)').each(function(){if(jQuery(this).closest("#lfb_stripeForm").length==0&&jQuery(this).closest("#wtmt_paypalForm").length==0){if(jQuery(this).val().length<1){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('input[type=checkbox][data-required="true"]:not(.lfb_disabled)').each(function(){if(!jQuery(this).is(":checked")){a=false;jQuery(this).closest(".form-group").addClass("has-error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('.selectable[data-required="true"]:not(.lfb_disabled)').each(function(){if(!jQuery(this).is(".checked")){a=false;jQuery(this).find(".icon_select").addClass("lfb_error");lfb_scrollToItem(jQuery(this),c,b)}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+c+'"]').find('.lfb_button[data-required="true"]:not(.lfb_disabled)').each(function(){if(!jQuery(this).is(".checked")){a=false;jQuery(this).find(".icon_select").addClass("lfb_error");lfb_scrollToItem(jQuery(this),c,b)}});return a}function wpe_nextStep(c){var b=wpe_getForm(c);jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove();jQuery('#estimation_popup[data-form="'+b.formID+'"] > .tooltip').remove();var f=navigator.userAgent.toLowerCase();var i=f.match(/(iPad|iPhone|iPod)/i);if(i){setTimeout(function(){jQuery("#lfb_bootstraped :not(.ui-slider-handle) > .tooltip").remove()},500)}lfb_updateShowSteps(c);jQuery(".errorMsg").hide();var e=true;var k=true;var h=0;var a=wpe_findPotentialsSteps(b.step,c);if(b.step>0){if(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').data("required")==true){e=false;if((jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find('select:not(.lfb_disabled):not([data-firstvaluedisabled="true"])').length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("div.selectable.checked:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("a.lfb_button.checked:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find('input[data-toggle="switch"]:checked:not(.lfb_disabled)').length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("input[type=text][data-title].checked:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("input[type=number][data-itemid].checked:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find("input[type=file].checked:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find(".lfb_colorPreview:not(.lfb_disabled)").length>0)||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find(".dz-preview[data-file].dz-success.dz-complete").length>0)){e=true}if(!e){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"]').find('select:not(.lfb_disabled)[data-firstvaluedisabled="true"]').each(function(){if(((!jQuery(this).is(".lfb_selectpicker")&&jQuery(this).find("option:selected").index()>0)||((jQuery(this).is(".lfb_selectpicker")&&jQuery(this).find("option:selected").index()>1)))){e=true}})}}k=lfb_checkStepItemsValid(b.step,c)}if(e&&k){lfb_lastStepID=b.step;if((parseFloat(lfb_lastStepID)==parseInt(lfb_lastStepID))&&!isNaN(lfb_lastStepID)){if(jQuery.inArray(parseInt(b.step),lfb_lastSteps)==-1){lfb_lastSteps.push(parseInt(b.step))}}var j=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+lfb_lastStepID+'"] .stepTitle').html();history.pushState({id:lfb_lastStepID},"","");var d=a[0];if(d!="final"){d=wpe_getNextEnabledStep(c,a);if(d==-1){d="final"}}if(b.sendContactASAP==1&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"] [data-fieldtype="email"]').length>0&&wpe_checkEmail(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"] [data-fieldtype="email"]').val())){b.contactSent=1;var g=wpe_getContactInformations(c);jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_sendCt",formID:c,email:g.email,lastName:g.lastName,firstName:g.firstName,phone:g.phone,country:g.country,zip:g.zip,state:g.state,city:g.city,address:g.address},success:function(l){}})}wpe_changeStep(d,c)}else{if(!e){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] .errorMsg').slideDown()}}}function wpe_getNextEnabledStep(d,a){var b=-1;var c=a[0];if(c!="final"){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"]  #mainPanel .genSlide[data-stepid="'+c+'"]').is(".lfb_disabled")&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #mainPanel .genSlide[data-stepid="'+c+'"] .lfb_item:not(.lfb-hidden)').length>0||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #mainPanel .genSlide[data-stepid="'+c+'"] .lfb_distanceError').length>0)){b=c}else{lfb_lastSteps.push(parseInt(c));wpe_updatePrice(d);b=wpe_getNextEnabledStep(d,wpe_findPotentialsSteps(parseInt(c),d))}}return b}function wpe_openGenerator(b){var a=wpe_getForm(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"]  #startInfos > p').slideDown();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] .lfb_btnFloatingSummary').css({display:"inline-block"});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #btnStart').parent().fadeOut(a.animationsSpeed,function(){if(a.showSteps!="2"){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] .genPrice').fadeIn(a.animationsSpeed)}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel').fadeIn(a.animationsSpeed+a.animationsSpeed/2,function(){wpe_nextStep(b)})})}function wpe_initListeners(b){var a=wpe_getForm(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide div.selectable .img,  #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide div.selectable .icon_select').click(function(){if(!tld_selectionMode){wpe_itemClick(jQuery(this).parent(),true,b)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide a.lfb_button').click(function(){if(!tld_selectionMode){wpe_itemClick(jQuery(this),true,b)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide [data-callnextstep="1"]').click(function(){if(!tld_selectionMode){wpe_nextStep(b)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel input[type=checkbox][data-price]').change(function(){if(jQuery(this).is('[data-usedistance="true"]')){lfb_removeDistanceError(jQuery(this).attr("data-itemid"),b)}wpe_updatePrice(b)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel input[type=checkbox][data-group]').change(function(f){var c=jQuery(this);if(c.is(":checked")){jQuery(this).closest(".genSlide").find('div.selectable.checked[data-group="'+c.data("group")+'"]').each(function(){wpe_itemClick(jQuery(this),false,b)});jQuery(this).closest(".genSlide").find('input[type=checkbox][data-group="'+c.data("group")+'"]:checked').each(function(){if(!jQuery(this).is(c)){jQuery(this).trigger("click.auto")}});if(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"]').is('[data-autoclick="1"]')&&c.closest(".genSlide").find("[data-itemid]").not('[data-group="'+c.data("group")+'"]').length==0){var d=wpe_getForm(b);wpe_nextStep(d.formID)}}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide select[data-itemid]').change(function(){var d=jQuery(this).val();var c=0;jQuery(this).find("option").each(function(){if(jQuery(this).attr("value")==d){c=jQuery(this).attr("data-price")}});jQuery(this).attr("data-price",c);wpe_updatePrice(b)});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide select[data-itemid]').trigger("change");jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel input[type=checkbox][data-price]').change(function(){});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide input.wpe_qtfield').change(function(){wpe_updatePrice(b)});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide').find("input[type=text][data-title],textarea[data-title],input[type=file][data-title],input[type=number][data-title]").change(function(){if(jQuery(this).val().length>0){jQuery(this).addClass("checked")}else{jQuery(this).removeClass("checked")}});jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide div.selectable .icon_quantity').click(function(){if(!tld_selectionMode){jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).removeClass("open");jQuery(".quantityBtns").not(jQuery(this).parent().find(".quantityBtns")).fadeOut(250);if(!jQuery(this).parent().find(".quantityBtns").is(".open")&&jQuery(this).parent().is(".checked")){if(jQuery(this).parent().find(".quantityBtns .tooltip-inner").length>0){jQuery(this).parent().find(".quantityBtns .tooltip-inner").html(parseInt(jQuery(this).parent().find(".icon_quantity").html()))}jQuery(this).parent().find(".quantityBtns").addClass("open");jQuery(this).parent().find(".quantityBtns").fadeIn(250)}else{jQuery(this).parent().find(".quantityBtns").removeClass("open");jQuery(this).parent().find(".quantityBtns").fadeOut(250)}}});jQuery("#wpe_orderMessageCheck").change(function(){if(jQuery(this).is(":checked")){jQuery("#wpe_orderMessage").slideDown(250)}else{jQuery("#wpe_orderMessage").slideUp(250)}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #wpe_btnOrder').click(function(){if(!tld_selectionMode){wpe_order(b)}});jQuery("#gform_wrapper_"+a.gravityFormID+" form").submit(function(f){var d=jQuery(this);if(!jQuery(this).is(".submit")){f.preventDefault();jQuery(this).addClass("submit");if(a.save_to_cart){var c=new Array();jQuery.each(lfb_lastSteps,function(){$panel=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+b+'"] #mainPanel .genSlide[data-stepid="'+this+'"]');$panel.find('div.selectable.checked:not(.lfb_disabled),a.lfb_button.checked:not(.lfb_disabled),input[type=checkbox]:checked:not(.lfb_disabled),[data-type="slider"]:not(.lfb_disabled)').each(function(){var e=1;if(parseInt(jQuery(this).data("resqt"))>0){e=parseInt(jQuery(this).data("resqt"))}if(jQuery(this).is('[data-type="slider"]')){e=parseInt(jQuery(this).slider("value"));if(!isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))){e=parseInt(jQuery(this).find(".tooltip-inner").html())}}if(parseInt(jQuery(this).data("prodid"))>0){c.push({quantity:e,product_id:parseInt(jQuery(this).data("prodid")),variation:parseInt(jQuery(this).attr("data-woovar"))})}})});jQuery.ajax({url:a.ajaxurl,type:"post",data:{action:"lfb_cart_save",ref:a.current_ref,products:c},success:function(){a.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(a.formID)},300);setTimeout(function(){d.submit()},700)}})}else{a.timer_gFormSubmit=setInterval(function(){wpe_check_gform_response(a.formID)},300);setTimeout(function(){d.submit()},700)}}else{jQuery(this).removeClass("submit")}})}function wpe_checkItems(b){var a=wpe_getForm(b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="true"]').each(function(){jQuery(this).css("opacity",0);jQuery(this).show();var e=jQuery('<canvas class="img"></canvas>');e.css({width:jQuery(this).get(0).width,height:jQuery(this).get(0).height});jQuery(this).hide();jQuery(this).after(e);var c=e.get(0).getContext("2d");var d=new Image();d.onload=function(){c.fillStyle=a.colorA;c.fillRect(0,0,e.get(0).width,e.get(0).height);c.fill();c.globalCompositeOperation="destination-in";c.drawImage(d,0,0,e.get(0).width,e.get(0).height)};d.src=jQuery(this).attr("src")});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide div.selectable img[data-tint="false"]').each(function(){if(jQuery(this).is("[data-src]")){jQuery(this).attr("src",jQuery(this).attr("data-src"))}});jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide div.selectable.checked , #estimation_popup.wpe_bootstraped[data-form="'+a.formID+'"] #mainPanel .genSlide  input[type=checkbox]:checked').hover(function(){jQuery(this).addClass("lfb_hover")},function(){jQuery(this).removeClass("lfb_hover")})}function lfb_getDistanceCalc(a,g,f,d,b,h){var e=0;var c=google.maps.UnitSystem.METRIC;lfb_gmapService=new google.maps.DistanceMatrixService();lfb_gmapService.getDistanceMatrix({origins:[d],destinations:[b],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC,avoidHighways:false,avoidTolls:false,},function(k,i){var l=false;if(i==google.maps.DistanceMatrixStatus.OK){var n=0;if(k.rows[0].elements[0].distance){n=k.rows[0].elements[0].distance.value;n=n/1000;if(h=="miles"){n=n*0.62}}else{l=true}var j=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] [data-itemid="'+f+'"]');jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] [data-itemid="'+f+'"]').attr("data-distance",n);var m=wpe_getForm(g);wpe_updateSummary(g);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #lfb_summary table tr[data-itemstep="'+f+'"] td:eq(2)').html(n);wpe_updatePrice(g);lfb_removeDistanceError(f,g)}else{l=true}if(l){lfb_showDistanceError(f,g)}});return e}function lfb_executeCalculation(calculation,formID,targetID){calculation=calculation.replace(/\\/g,"");var form=wpe_getForm(formID);var price=0;var i=0;var elementsToReplace=new Array();var $target=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+targetID+'"]');var _stepID=parseInt($target.closest(".genSlide").attr("data-stepid"));while((i=calculation.indexOf("item-",i+1))!=-1){var itemID=calculation.substr(i+5,calculation.indexOf("_",i)-(i+5));var action=calculation.substr(calculation.indexOf("_",i)+1,(calculation.indexOf("]",i)-1)-(calculation.indexOf("_",i)));var value=0;var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]');if(action=="isChecked"){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(":checked")){value="1==1"}else{value="1==0"}}if(action=="isUnchecked"){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(".checked")&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(":checked")){value="1==1"}else{value="1==0"}}if(action=="isFilled"){if($item.is(".lfb_dropzone")){if($item.find(".dz-preview[data-file].dz-success.dz-complete").length>0){value="1==1"}else{value="1==0"}}else{if($item.val().length>0){value="1==1"}else{value="1==0"}}}if(action=="price"){value=0;if(itemID=="total"){value=form.price}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is('[data-type="slider"]')){value=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').data("resprice"));if(isNaN(value)){value=0}}}}if(action=="quantity"){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is(":checked")){if($item.find(".icon_quantity").length>0){value=parseFloat($item.find(".icon_quantity").html())}else{value=$item.find(".wpe_qtfield").val()}if(isNaN(value)){value=0}}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is('[data-type="slider"]')){value=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').slider("value")}}}if(action=="value"){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').is("select")){value='"'+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').val()+'"'}else{value=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+itemID+'"]').val());if(isNaN(value)){value=0}}}if(action=="date"){if($item.is(".lfb_datepicker")&&$item.datepicker("getDate")!=null){value="'"+jQuery.datepicker.formatDate("yy-mm-dd",$item.datepicker("getDate"))+"'"}else{value="null"}}elementsToReplace.push({oldValue:calculation.substr(i-1,(calculation.indexOf("]",i)+1)-(i-1)),newValue:value})}var todayDate=new Date();var month=todayDate.getMonth()+1;if(month<10){month="0"+month}var today=todayDate.getFullYear().toString()+month.toString()+todayDate.getDate().toString();calculation=calculation.replace(/\[currentDate\]/g,today);if(calculation.indexOf("dateDifference-")>-1){while((i=calculation.indexOf("dateDifference-",i+1))!=-1){var startDateAdPosEnd=calculation.indexOf("_",i+15)+1;var startDate=calculation.substr(i+15,calculation.indexOf("_",i)-(i+15));var endDate=calculation.substr(startDateAdPosEnd,calculation.indexOf("]",startDateAdPosEnd)-(startDateAdPosEnd));if(startDate=="currentDate"){startDate=todayDate}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').length>0&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]').val().length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+startDate+'"]');startDate=$item.datepicker("getDate")}else{startDate=todayDate}}if(endDate=="currentDate"){endDate=today}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').length>0&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]').val().length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+endDate+'"]');endDate=$item.datepicker("getDate")}else{endDate=todayDate}}var timeDiff=Math.abs(endDate.getTime()-startDate.getTime());var result=Math.ceil(timeDiff/(1000*3600*24));if(result<0){result=0}elementsToReplace.push({oldValue:calculation.substr(i-1,(calculation.indexOf("]",i)+1)-(i-1)),newValue:result})}}if(calculation.indexOf("distance_")>-1){$target.attr("data-usedistance","true");while((i=calculation.indexOf("distance_",i+1))!=-1){var distanceType="km";var departAdPosEnd=calculation.indexOf("-",i+9)+1;var departAdress=calculation.substr(i+9,calculation.indexOf("-",i)-(i+9));var departCityPosEnd=calculation.indexOf("-",departAdPosEnd)+1;var departCity=calculation.substr(departAdPosEnd,calculation.indexOf("-",departAdPosEnd)-(departAdPosEnd));var departZipPosEnd=calculation.indexOf("-",departCityPosEnd)+1;var departZip=calculation.substr(departCityPosEnd,calculation.indexOf("-",departCityPosEnd)-(departCityPosEnd));var departCountryPosEnd=calculation.indexOf("_",departZipPosEnd)+1;var departCountry=calculation.substr(departZipPosEnd,calculation.indexOf("_",departZipPosEnd)-(departZipPosEnd));var arrivalAdPosEnd=calculation.indexOf("-",departCountryPosEnd)+1;var arrivalAdress=calculation.substr(departCountryPosEnd,calculation.indexOf("-",departCountryPosEnd)-(departCountryPosEnd));var arrivalCityPosEnd=calculation.indexOf("-",arrivalAdPosEnd)+1;var arrivalCity=calculation.substr(arrivalAdPosEnd,calculation.indexOf("-",arrivalAdPosEnd)-(arrivalAdPosEnd));var arrivalZipPosEnd=calculation.indexOf("-",arrivalCityPosEnd)+1;var arrivalZip=calculation.substr(arrivalCityPosEnd,calculation.indexOf("-",arrivalCityPosEnd)-(arrivalCityPosEnd));var arrivalCountryPosEnd=calculation.indexOf("_",arrivalZipPosEnd)+1;var arrivalCountry=calculation.substr(arrivalZipPosEnd,calculation.indexOf("_",arrivalZipPosEnd)-(arrivalZipPosEnd));distanceType=calculation.substr(arrivalCountryPosEnd,calculation.indexOf("]",arrivalCountryPosEnd)-(arrivalCountryPosEnd));if(departAdress!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departAdress+'"]');departAdress=$item.val()}else{departAdress=0}}if(departCity!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCity+'"]');departCity=$item.val()}else{departCity=0}}if(departZip!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departZip+'"]');departZip=$item.val()}else{departZip=0}}if(departCountry!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+departCountry+'"]');departCountry=$item.val()}else{departCountry=0}}if(arrivalAdress!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalAdress+'"]');arrivalAdress=$item.val()}else{arrivalAdress=0}}if(arrivalCity!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCity+'"]');arrivalCity=$item.val()}else{arrivalCity=0}}if(arrivalZip!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalZip+'"]');arrivalZip=$item.val()}else{arrivalZip=0}}if(arrivalCountry!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]').length>0){var $item=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+formID+'"] #mainPanel .genSlide [data-itemid="'+arrivalCountry+'"]');arrivalCountry=$item.val()}else{arrivalCountry=0}}if($target.closest(".genSlide").find(".lfb_distanceError").length>0){lfb_removeDistanceError(targetID,formID)}var distanceCode=calculation.substr(i-1,(calculation.indexOf("]",i)+1)-(i-1));var distance=0;if($target.attr("data-distance")!=""){distance=parseFloat($target.attr("data-distance"))}if(departAdress==""&&departCity==""&&departCountry==""&&arrivalAdress==""&&arrivalCity==""&&arrivalCountry==""&&departZip==""&&arrivalZip==""){lfb_showDistanceError(targetID,formID)}else{if(form.gmap_key==""){lfb_showDistanceError(targetID,formID);console.log("invalid gmap api key")}else{var depart=departAdress+" "+departZip+" "+departCity+" "+departCountry;var arrival=arrivalAdress+" "+arrivalZip+" "+arrivalCity+" "+arrivalCountry;if($target.attr("data-departure")!=depart||arrival!=$target.attr("data-arrival")){$target.attr("data-departure",depart);$target.attr("data-arrival",arrival);lfb_getDistanceCalc(distanceCode,formID,targetID,depart,arrival,distanceType)}}}elementsToReplace.push({oldValue:calculation.substr(i-1,(calculation.indexOf("]",i)+1)-(i-1)),newValue:distance})}}jQuery.each(elementsToReplace,function(){calculation=calculation.replace(this.oldValue,this.newValue)});calculation=calculation.replace(/\[total\]/g,form.price);calculation=calculation.replace(/\[total_quantity\]/g,wpe_getTotalQuantities(formID,_stepID));i=0;while((i=calculation.indexOf("{",i+1))!=-1){var charsToEnd=calculation.substr(i+1,(calculation.indexOf("}",i+1)-(i+1)));if(/\S/.test(charsToEnd)){calculation=calculation.substr(0,i+1)+" price ="+calculation.substr(i+1,calculation.length);i+=8}}if(calculation.indexOf("if")<0){calculation="price = "+calculation}else{var charsToStart=calculation.substr(0,calculation.indexOf("if"));if(/\S/.test(charsToStart)){calculation="price = "+calculation}}calculation=lfb_removeDoubleSpaces(calculation);calculation=calculation.replace(/price =\n if/g,"\nif");calculation=calculation.replace(/price = if/g,"if");calculation=calculation.replace(/price = \nif/g,"\nif");calculation=calculation.replace(/price = \n if/g,"\n if");try{eval(calculation)}catch(e){console.log("wrong calculation")}return parseFloat(price)}function lfb_removeDoubleSpaces(a){a=a.replace(/\t/g,"");a=a.replace(/  /g," ");if(a.indexOf("  ")>-1){lfb_removeDoubleSpaces(a)}return a}function lfb_removeDistanceError(d,c){var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+d+'"]');if(a.closest(".genSlide").find('[data-itemid][data-usedistance="true"]:not([data-distance]):not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"]:not([data-distance]):checked,[data-itemid][data-usedistance="true"]:not([data-distance])[data-type="slider"]').length==0&&a.closest(".genSlide").find('[data-itemid][data-usedistance="true"][data-distance="0"]:not([type="checkbox"]).checked,[data-itemid][data-usedistance="true"][data-distance="0"]:checked,[data-itemid][data-usedistance="true"][data-distance="0"][data-type="slider"]').length==0){a.closest(".genSlide").find(".btn-next").fadeIn();a.closest(".genSlide").find(".lfb_btnNextContainer").fadeIn();a.closest(".genSlide").find(".btn-next").removeClass("lfb_disabledBtn");var b=a.closest(".genSlide").find(".lfb_distanceError");b.fadeOut();setTimeout(function(){b.remove()},300)}}function lfb_showDistanceError(e,d){var b=wpe_getForm(d);var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #mainPanel .genSlide [data-itemid="'+e+'"]');a.closest(".genSlide").find(".btn-next").addClass("lfb_disabledBtn");a.closest(".genSlide").find(".btn-next").hide();if(a.closest(".genSlide").find(".lfb_distanceError").length==0){a.closest(".genSlide").find(".lfb_btnNextContainer").before('<div class="lfb_distanceError alert alert-danger"><p>'+b.txtDistanceError+"</p></div>")}var c=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] [data-itemid="'+e+'"]').closest(".genSlide").attr("data-stepid");if(b.step=="final"&&!b.backFomFinal){b.backFomFinal=true;wpe_changeStep(c,d)}}function wpe_updateLabelItem(a,b){form=wpe_getForm(b);if(!a.is(".dropzone")){a.closest(".itemBloc").find("label").each(function(){if(jQuery(this).html().indexOf(":")>-1&&jQuery(this).closest(".switch").length==0){jQuery(this).html(a.attr("data-original-title"))}})}}function wpe_updatePrice(d){var c=false;lfb_updateShowSteps(d);lfb_updateShowItems(d);lfb_updateLayerImages(d);form=wpe_getForm(d);form.lastPrice=form.price;form.price=form.initialPrice;form.priceSingle=0;wpe_updatePlannedSteps(d);wpe_updateStep(d);var k=lfb_lastSteps.slice();var f=0;var q=0;if(form.step!="final"&&jQuery.inArray(parseInt(form.step),k)==-1){k.push(parseInt(form.step))}else{if(form.step=="final"&&jQuery.inArray("final",k)==-1){k.push("final")}}jQuery.each(k,function(){var e=this;if((e=="final"||parseInt(e)!=0)&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+e+'"]').is(".lfb_disabled")){$panel=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel .genSlide[data-stepid="'+e+'"]');$panel.find('div.selectable.checked, a.lfb_button.checked, input[type=checkbox]:checked,select[data-itemid][data-price],div[data-type="slider"],input[type=number][data-valueasqt="1"]').each(function(){if(!jQuery(this).is(".lfb_disabled")&&jQuery(this).closest(".itemBloc.lfb_disabled").length==0){if(!jQuery(this).is(".lfb_disabled")){if(jQuery(this).is('[data-singleprice="true"]')){c=true}jQuery(this).data("price",jQuery(this).attr("data-price"));if(jQuery(this).is("[data-usecalculation]")){if(form.step!="final"||lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid"))!=0){jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))}}if(jQuery(this).find(".icon_quantity").length>0||jQuery(this).find(".wpe_qtfield").length>0||jQuery(this).is('[data-type="slider"]')||jQuery(this).is('input[type=number][data-valueasqt="1"]')){var r="";var u=0;var x=99999999999999;if(jQuery(this).find(".icon_quantity").length>0){r=jQuery(this).find(".icon_quantity").html();u=jQuery(this).find(".quantityBtns").attr("data-min");x=jQuery(this).find(".quantityBtns").attr("data-max")}else{if(jQuery(this).find(".wpe_qtfield").length>0){r=jQuery(this).find(".wpe_qtfield").val();u=jQuery(this).find(".wpe_qtfield").attr("min");x=jQuery(this).find(".wpe_qtfield").attr("max")}else{if(jQuery(this).is('[data-type="slider"]')){r=parseInt(jQuery(this).slider("value"));if(!isNaN(parseInt(jQuery(this).find(".tooltip-inner").html()))){r=parseInt(jQuery(this).find(".tooltip-inner").html())}u=jQuery(this).attr("data-min");x=jQuery(this).attr("data-max")}else{if(jQuery(this).is('input[type=number][data-valueasqt="1"]')){r=parseFloat(jQuery(this).val());u=jQuery(this).attr("min");if(jQuery(this).is("[max]")){x=jQuery(this).attr("max")}else{x=100000000000000000}}}}}if(jQuery(this).is("[data-usecalculationqt]")){r=lfb_executeCalculation(jQuery(this).attr("data-calculationqt"),d,jQuery(this).attr("data-itemid"));if(isNaN(r)){r=0}if(r>x){r=x}if(r<u){r=u}if(jQuery(this).find(".icon_quantity").length>0){jQuery(this).find(".icon_quantity").html(r);if(jQuery(this).find(".wpe_sliderQt").length>0){jQuery(this).find(".wpe_sliderQt").slider("value",parseInt(r))}jQuery(this).find(".quantityBtns").addClass("lfb-hidden")}else{if(jQuery(this).find(".wpe_qtfield").length>0){jQuery(this).find(".wpe_qtfield").val(r)}else{if(jQuery(this).is('[data-type="slider"]')){jQuery(this).slider("value",parseInt(r))}}}}if(jQuery(this).is("[data-distanceqt]")){lfb_executeCalculation(jQuery(this).attr("data-distanceqt"),d,jQuery(this).attr("data-itemid"));if(jQuery(this).is("[data-distance]")){r=parseFloat(jQuery(this).attr("data-distance")).toFixed(2)}if(r<u){r=u}else{if(r>x){r=x}}if(jQuery(this).find(".wpe_qtfield").length>0){jQuery(this).find(".wpe_qtfield").val(r)}else{if(jQuery(this).find(".wpe_sliderQt").length>0){jQuery(this).find(".wpe_sliderQt").slider("value",r);jQuery(this).find(".icon_quantity").html(r)}else{if(jQuery(this).find(".quantityBtns").length>0){jQuery(this).find(".icon_quantity").html(r)}else{if(jQuery(this).is('[data-type="slider"]')){jQuery(this).slider("value",r)}}}}if(jQuery(this).is("[data-usecalculation]")){jQuery(this).data("price",lfb_executeCalculation(jQuery(this).attr("data-calculation"),d,jQuery(this).attr("data-itemid")))}}jQuery(this).attr("data-resqt",r);if((jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel').data("savecart")=="0")||(jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #mainPanel').data("savecart")=="1"&&jQuery(this).data("prodid")>0)){if(jQuery(this).data("price")){if(jQuery(this).data("operation")=="-"){jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price"))*parseFloat(r));if(jQuery(this).is('[data-singleprice="true"]')){form.priceSingle-=parseFloat(jQuery(this).data("price"))*parseFloat(r)}else{form.price-=parseFloat(jQuery(this).data("price"))*parseFloat(r)}}else{if(jQuery(this).data("operation")=="x"){for(var v=0;v<parseFloat(r);v++){if(v==0){form.price=form.price;jQuery(this).data("resprice",form.price)}else{if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle+=((q*parseFloat(jQuery(this).data("price")))/100)}jQuery(this).data("resprice",(q*parseFloat(jQuery(this).data("price")))/100)}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price+=((f*parseFloat(jQuery(this).data("price")))/100)}jQuery(this).data("resprice",(form.price*parseFloat(jQuery(this).data("price")))/100)}}}}else{if(jQuery(this).data("operation")=="/"){for(var v=0;v<parseFloat(r);v++){jQuery(this).data("resprice",0-(form.price*parseFloat(jQuery(this).data("price")))/100);if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle=form.price-(form.price*parseFloat(jQuery(this).data("price")))/100}}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price=form.price-(form.price*parseFloat(jQuery(this).data("price")))/100}}}}else{var y=-2;if(jQuery(this).data("reduc")&&jQuery(this).data("reducqt").length>0){var A=this;var z=jQuery(this).data("reducqt");z=z.split("*");var w=new Array();var s=0;jQuery.each(z,function(B){var C=z[B].split("|");w.push(C[1]);if(parseFloat(C[0])<=parseFloat(r)){y=B}if(parseFloat(C[0])<s||s==0){s=parseFloat(C[0])}})}if(y>=0){var t=parseFloat(w[y])*parseFloat(r);if(jQuery(this).attr("data-price")=="0"){t=parseFloat(w[y])*(parseFloat(r)-s)}jQuery(this).data("resprice",t);if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle+=parseFloat(t)}}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price+=parseFloat(t)}}if(form.currencyPosition=="left"){if(jQuery(this).is('[data-showprice="1"]')){if(jQuery(this).data("operation")=="+"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : "+form.currency+(wpe_formatPrice(w[y],d)));jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : "+form.currency+(wpe_formatPrice(w[y],d)));if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{if(jQuery(this).data("operation")=="-"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+form.currency+(wpe_formatPrice(w[y],d)));if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+form.currency+(wpe_formatPrice(w[y],d)));if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{if(jQuery(this).data("operation")=="x"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : +"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : +"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}}}}else{jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle"))}if(jQuery(this).find(".quantityBtns").is(".open")&&form.imgTitlesStyle==""){if(form.disableTipMobile==0||!wpe_is_touch_device()){jQuery(this).b_tooltip("show")}}}else{if(jQuery(this).is('[data-showprice="1"]')){if(jQuery(this).attr("data-operation")=="+"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : "+(wpe_formatPrice(w[y],d))+form.currency);jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : "+(wpe_formatPrice(w[y],d))+form.currency);if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{if(jQuery(this).attr("data-operation")=="-"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+ +(wpe_formatPrice(w[y],d)));jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+(wpe_formatPrice(w[y],d))+form.currency);if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{if(jQuery(this).attr("data-operation")=="x"){jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : +"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : +"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}else{jQuery(this).attr("title",jQuery(this).data("originaltitle")+" : -"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle")+" : -"+(wpe_formatPrice(w[y],d))+"%");if(form.disableTipMobile==0||!wpe_is_touch_device()){if(!jQuery(this).is('[data-type="slider"]')&&!jQuery(this).is(".lfb_button")&&form.imgTitlesStyle==""){jQuery(this).b_tooltip("fixTitle")}}wpe_updateLabelItem(jQuery(this),d)}}}}else{jQuery(this).attr("data-original-title",jQuery(this).data("originaltitle"))}if(jQuery(this).find(".quantityBtns").is(".open")&&form.imgTitlesStyle==""){if(form.disableTipMobile==0||!wpe_is_touch_device()){jQuery(this).b_tooltip("show")}}}}else{jQuery(this).data("resprice",parseFloat(jQuery(this).data("price"))*parseFloat(r));form.price=parseFloat(form.price);form.priceSingle=parseFloat(form.priceSingle);if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle+=parseFloat(jQuery(this).data("price"))*parseFloat(r)}}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price+=parseFloat(jQuery(this).data("price"))*parseFloat(r)}}wpe_updateItemTitleNoReduc(jQuery(this),form);if(jQuery(this).find(".quantityBtns").is(".open")&&form.imgTitlesStyle==""){if(form.disableTipMobile==0||!wpe_is_touch_device()){jQuery(this).b_tooltip("show")}}}}}}}else{jQuery(this).data("resprice","0")}}}else{jQuery(this).data("resqt","0");if(jQuery(this).data("price")){if(jQuery(this).data("operation")=="-"){jQuery(this).data("resprice",0-parseFloat(jQuery(this).data("price")));if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle-=parseFloat(jQuery(this).data("price"))}}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price-=parseFloat(jQuery(this).data("price"))}}}else{if(jQuery(this).data("operation")=="x"){if(jQuery(this).is('[data-singleprice="true"]')){jQuery(this).data("resprice",(form.priceSingle*parseFloat(jQuery(this).data("price")))/100);if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle=form.priceSingle+(form.priceSingle*parseFloat(jQuery(this).data("price")))/100}}else{jQuery(this).data("resprice",(form.price*parseFloat(jQuery(this).data("price")))/100);if(jQuery(this).is('[data-addtototal!="1"]')){form.price=form.price+(form.price*parseFloat(jQuery(this).data("price")))/100}}}else{if(jQuery(this).attr("data-operation")=="/"){if(jQuery(this).is('[data-singleprice="true"]')){jQuery(this).data("resprice",0-(form.priceSingle*parseFloat(jQuery(this).data("price")))/100);if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle=form.priceSingle-(form.priceSingle*parseFloat(jQuery(this).data("price")))/100}}else{jQuery(this).data("resprice",0-(form.price*parseFloat(jQuery(this).data("price")))/100);if(jQuery(this).is('[data-addtototal!="1"]')){form.price=form.price-(form.price*parseFloat(jQuery(this).data("price")))/100}}}else{jQuery(this).data("resprice",jQuery(this).data("price"));if(jQuery(this).is('[data-singleprice="true"]')){if(jQuery(this).is('[data-addtototal!="1"]')){form.priceSingle+=parseFloat(jQuery(this).data("price"))}}else{if(jQuery(this).is('[data-addtototal!="1"]')){form.price=parseFloat(form.price)+parseFloat(jQuery(this).data("price"))}}}}}wpe_updateItemTitleNoReduc(jQuery(this),form)}else{jQuery(this).data("resprice","0")}}}}})}f=form.price;q=form.priceSingle});if(form.reduction>0){if(form.reductionType&&form.reductionType=="%"){if(form.priceSingle>0){form.reductionResult=(form.priceSingle*form.reduction)/100}else{form.reductionResult=(form.price*form.reduction)/100}}else{form.reductionResult=form.reduction}form.reductionResult=parseFloat(form.reductionResult);if(form.priceSingle==0){form.price-=form.reductionResult}else{form.priceSingle-=form.reductionResult}}if(!form.price||form.price<0){form.price=0}if(!c||!form.priceSingle||form.priceSingle<0){form.priceSingle=0}var m=/^\d+(\.\d{2})?$/;if(!m.test(form.price)){form.price=parseFloat(form.price).toFixed(2)}try{if(!m.test(form.priceSingle)){form.priceSingle=parseFloat(form.priceSingle).toFixed(2)}}catch(j){}var o=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle),d);var b=form.currency+""+wpe_formatPrice(parseFloat(form.price),d);var n=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween");var l=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&parseFloat(form.price)>0){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull")}var g=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange"));var a=(parseFloat(form.price)-g/2);if(a<0){a=0}b=n+"<br/><strong>"+form.currency+""+wpe_formatPrice(a,d)+"</strong><br/>"+l+"<br/><strong>"+form.currency+""+wpe_formatPrice(parseFloat(form.price)+g/2,d)+"</strong>"}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull")}if(form.currencyPosition!="left"){b=wpe_formatPrice(form.price,d)+""+form.currency;o=wpe_formatPrice(form.priceSingle,d)+""+form.currency;if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&parseFloat(form.price)>0){if(!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').is(".lfb_notNull")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_notNull")}var g=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange"));var a=(parseFloat(form.price)-g/2);if(a<0){a=0}b=n+"<br/><strong>"+wpe_formatPrice(a,d)+form.currency+"</strong><br/>"+l+"<br/><strong>"+wpe_formatPrice(parseFloat(form.price)+g/2,d)+form.currency+"</strong>"}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_notNull")}}if(form.showTotalBottom==1){if(c&&form.priceSingle>0){if(form.price<0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').removeClass("lfb_priceSingle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>span.lfb_subPrice').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>br').remove()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').addClass("lfb_priceSingle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').each(function(){if(jQuery(this).find(".lfb_subPrice").length==0){jQuery(this).find(">span:eq(0)").after('<br/><span class="lfb_subPrice">+ '+b+"</span>")}})}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom').removeClass("lfb_priceSingle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>span.lfb_subPrice').remove();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom>br').remove()}if(c&&form.priceSingle>0){if(form.price<=0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(o);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').hide();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').hide()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:eq(2)').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(o);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span.lfb_subPrice').html("+ "+b)}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .lfb_totalBottom> span:first-child').html(b)}}if(form.showSteps==0){if(c&&form.priceSingle>0){if(form.price<0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_priceSingle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span.lfb_subPrice').remove()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').addClass("lfb_priceSingle");if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').length==0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span:eq(0)').after('<span class="lfb_subPrice">+ '+b+"</span>")}}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').removeClass("lfb_priceSingle");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price>span.lfb_subPrice').remove()}if(c&&form.priceSingle>0){if(form.price<=0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","6px");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(o);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').hide();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').hide()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("top","-5px");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(2)').show();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(o);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span.lfb_subPrice').html("+ "+b)}}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is('[data-isSubs="true"]')){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","6px")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px")}if(form.price>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').css("position","relative").css("top","0px");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').show()}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:eq(1)').hide()}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html(b)}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').length>0){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price> span:first-child').html().length>8){if(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))>=16){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","16px")}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","18px")}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length>9){if(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))>=14){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","14px")}}if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price > span:first-child').html().length>10){if(parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size"))>=11){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').css("font-size","11px")}}}var i=(form.price*100)/form.priceMax;if(form.showInitialPrice==1){i=((form.price-parseFloat(form.initialPrice))*100)/form.priceMax}if(i>100){i=100}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar').css("width",i+"%");if(jQuery("body").is(".rtl")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({right:i+"%"},70)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] .genPrice .progress .progress-bar-price').animate({left:i+"%"},70)}}var p=form.currency+""+wpe_formatPrice(parseFloat(form.price).toFixed(2),d);var h=form.currency+""+wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d);if(form.currencyPosition!="left"){p=wpe_formatPrice(parseFloat(form.price).toFixed(2),d)+""+form.currency;h=wpe_formatPrice(parseFloat(form.priceSingle).toFixed(2),d)+""+form.currency}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(p);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').is("[data-totalrange]")&&parseFloat(form.price)>0){var n=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabelbetween");var l=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-rangelabeland");var g=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange"));var a=(parseFloat(form.price)-g/2);if(a<0){a=0}b=n+"<br/><strong>"+form.currency+""+wpe_formatPrice(a,d)+"</strong><br/>"+l+"<br/><strong>"+form.currency+""+wpe_formatPrice(parseFloat(form.price)+g/2,d)+"</strong>";if(form.currencyPosition!="left"){var g=parseInt(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"]').attr("data-totalrange"));b=n+"<br/><strong>"+wpe_formatPrice(a,d)+form.currency+"</strong><br/>"+l+"<br/><strong>"+wpe_formatPrice(parseFloat(form.price)+g/2,d)+form.currency+"</strong>"}jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html(b.replace(/<br\/>/g," "))}wpe_updateSummary(d);if(c&&form.priceSingle>0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(o);if(form.price<=0){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","none");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","none");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+h+"</strong>")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').html("+"+b+form.subscriptionText);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","block");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+d+'"] #lfb_summary table #lfb_summaryTotal>span:eq(0)').html("<strong>"+h+"</strong> <br/>+"+p)}}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(2)').css("display","inline-block");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(1)').css("display","inline-block");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+form.formID+'"] #finalPrice span:eq(0)').html(b)}wpe_updateStep(d);lfb_updateRichTextValues(d)}function wpe_updateItemTitleNoReduc(a,b){var c=b.formID;if(b.currencyPosition=="left"){if(a.is('[data-showprice="1"]')){if(a.data("operation")=="+"){a.attr("title",a.data("originaltitle")+" : "+b.currency+(wpe_formatPrice(a.data("price"),c)));a.attr("data-original-title",a.data("originaltitle")+" : "+b.currency+(wpe_formatPrice(a.data("price"),c)));if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{if(a.data("operation")=="-"){a.attr("title",a.data("originaltitle")+" : -"+b.currency+(wpe_formatPrice(a.data("price"),c)));if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : -"+b.currency+(wpe_formatPrice(a.data("price"),c)));if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{if(a.data("operation")=="x"){a.attr("title",a.data("originaltitle")+" : +"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : +"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{a.attr("title",a.data("originaltitle")+" : -"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : -"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}}}}else{a.attr("data-original-title",a.data("originaltitle"))}}else{if(a.is('[data-showprice="1"]')){if(a.attr("data-operation")=="+"){a.attr("title",a.data("originaltitle")+" : "+(wpe_formatPrice(a.data("price"),c))+b.currency);a.attr("data-original-title",a.data("originaltitle")+" : "+(wpe_formatPrice(a.data("price"),c))+b.currency);if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{if(a.attr("data-operation")=="-"){a.attr("title",a.data("originaltitle")+" : -"+ +(wpe_formatPrice(a.data("price"),c)));if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : -"+(wpe_formatPrice(a.data("price"),c))+b.currency);if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{if(a.attr("data-operation")=="x"){a.attr("title",a.data("originaltitle")+" : +"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : +"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}else{a.attr("title",a.data("originaltitle")+" : -"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}a.attr("data-original-title",a.data("originaltitle")+" : -"+(wpe_formatPrice(a.data("price"),c))+"%");if(b.disableTipMobile==0||!wpe_is_touch_device()){if(!a.is('[data-type="slider"]')&&!a.is(".lfb_button")&&b.imgTitlesStyle==""){a.b_tooltip("fixTitle")}}wpe_updateLabelItem(a,c)}}}}else{a.attr("data-original-title",a.data("originaltitle"))}}if(a.parent().children(".lfb_imgTitle").length>0&&a.is("[data-original-title]")){a.parent().children(".lfb_imgTitle").html(a.attr("data-original-title"))}}function wpe_isDecimal(c){if(c==""){return false}var a="0123456789";var b;for(b in c){if(a.indexOf(c[b])==-1){return false}}return true}function wpe_changeContentSlide(b,c){var a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").index();if(b=="left"){if(a>0){a--}else{a=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length}}else{if(a<jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").length-1){a++}else{a=0}}jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").fadeOut(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide.active").removeClass("active");jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(200).fadeIn(500,function(){jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').find(".genContent").find(".genContentSlide").eq(a).delay(250).addClass("active")})})}function wpe_toggleField(a,c){var b=wpe_getForm(c);if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #field_'+a+"_cb").is(":checked")){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #field_'+a).addClass("opened");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #field_'+a).slideDown(250)}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #field_'+a).removeClass("opened");jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #field_'+a).slideUp(250)}setTimeout(function(){var e=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid="'+b.step+'"] h2.stepTitle').height();var d=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide[data-stepid='+b.step+"]").outerHeight()+160+e;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel').css("min-height",d)},300)}function wpe_finalStep(b){var a=wpe_getForm(b);a.step++;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+b+'"] #lfb_loader').delay(800).fadeOut(a.animationsSpeed*2);setTimeout(function(){var c=lfb_getRedirectionURL(b);if(c!=""&&c!="#"&&c!=" "){document.location.href=c}},a.redirectionDelay*1000)}function wpe_updateStep(g){var f=wpe_getForm(g);if(f.showSteps==1){var e=new Array();var c=false;jQuery.each(lfb_plannedSteps,function(){if(!c&&!jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+this+'"]').is(".lfb_disabled")&&(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_item:not(.lfb-hidden)').length>0||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] #mainPanel .genSlide[data-stepid="'+this+'"] .lfb_distanceError').length>0)){e.push(this)}});var a=0;jQuery.each(e,function(j,h){if(parseInt(h)==parseInt(f.step)){a=j}});a++;if(a==0){a=1}if(f.step=="final"){a=e.length+1}var b=e.length+1;if(a>b){a=b}var d=((a)*100)/b;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] .genPrice .progress .progress-bar-price> span:first-child').html((a)+"/"+b);jQuery('#estimation_popup.wpe_bootstraped[data-form="'+g+'"] .genPrice .progress .progress-bar').css("width",d+"%")}}function wpe_initPanelResize(b){var a=wpe_getForm(b);jQuery(window).resize(function(){lfb_resize(b)})}function lfb_resize(a){var c=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"] h2.stepTitle').height();var b=jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel .genSlide[data-stepid="'+form.step+'"]').outerHeight()+160+c;jQuery(' #estimation_popup.wpe_bootstraped[data-form="'+a+'"] #mainPanel').css("min-height",b)}function lfb_rgb2hex(a){if(a.indexOf("rgb")>-1){try{a=a.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+))?\)$/);function b(d){return("0"+parseInt(d).toString(16)).slice(-2)}return"#"+b(a[1])+b(a[2])+b(a[3])}catch(c){return a}}else{return a}}function wpe_formatPrice(h,e){if(!h){h=0}var a=h.toString();if(a.indexOf(".")>-1){a=parseFloat(h).toFixed(2).toString()}var b=wpe_getForm(e);if(b.summary_noDecimals=="1"){a=Math.round(a).toString()}var c=b.decimalsSeparator;var g=b.thousandsSeparator;var i=a;var f=b.millionSeparator;var d="";if(a.indexOf(".")>-1){i=a.substr(0,a.indexOf("."));d=a.substr(a.indexOf(".")+1,2);a=a.replace(".",b.decimalsSeparator);if(d.toString().length==1){d=d.toString()+"0"}if(i.length>6){a=i.substr(0,i.length-6)+f+i.substr(i.length-6,3)+g+i.substr(i.length-3,i.length)+b.decimalsSeparator+d}else{if(i.length>3){a=i.substr(0,i.length-3)+g+i.substr(i.length-3,i.length)+b.decimalsSeparator+d}}}else{if(i.length>6){a=i.substr(0,i.length-6)+f+i.substr(i.length-6,3)+g+i.substr(i.length-3,i.length)}else{if(i.length>3){a=i.substr(0,i.length-3)+g+i.substr(i.length-3,i.length)}}}return a}function lfb_applyCouponCode(c){var b=wpe_getForm(c);var a=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_couponField').val();jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_couponField').closest(".form-group").removeClass("has-error");if(a.length<3){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_couponField').closest(".form-group").addClass("has-error")}else{jQuery.ajax({url:b.ajaxurl,type:"post",data:{action:"lfb_applyCouponCode",formID:c,code:a},success:function(d){if(d=="0"||d==""){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_couponField').closest(".form-group").addClass("has-error")}else{jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #lfb_couponContainer').slideUp();var e=d;if(d.indexOf("%")>0){e=d.substr(0,d.length-1);b.reductionType="%"}b.discountCode=a;b.reduction=e;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #finalSlide .genContent').animate({opacity:0},b.animationsSpeed);setTimeout(function(){wpe_updatePrice(c);wpe_changeStep("final",c)},b.animationsSpeed+100)}}})}}function lfb_getRedirectionURL(c){var a=wpe_getForm(c);var b=a.close_url;if(a.useRedirectionConditions==1){jQuery.each(a.redirections,function(){var d=this.conditions.replace(/'/g,'"');d=d.replace(/\\"/g,'"');d=JSON.parse(d);var e=lfb_checkConditions(d,c,"final");error=e.error;errorOR=e.errorOR;if((this.conditionsOperator=="OR"&&!errorOR)||(this.conditionsOperator!="OR"&&!error)){b=this.url}})}return b}function lfb_startFormIntro(a){if(!tld_selectionMode){jQuery('#estimation_popup.wpe_bootstraped[data-form="'+a+'"]  #startInfos > p').slideDown()}}function lfb_updateRichTextValues(c){var b=wpe_getForm(c);var a=0;jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] .lfb_richtext[data-itemid]').each(function(){var M=0;var l=new Array();var J=parseInt(jQuery(this).closest(".genSlide").attr("data-stepid"));if(b.richtextsContent[jQuery(this).attr("data-itemid").toString()]!==undefined){var o=b.richtextsContent[jQuery(this).attr("data-itemid").toString()];while((M=o.indexOf("item-",M+1))!=-1){var H=o.substr(M+5,o.indexOf("_",M)-(M+5));var f=o.substr(o.indexOf("_",M)+1,(o.indexOf("]",M)-1)-(o.indexOf("_",M)));var I=0;var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]');if(f=="price"){I=0;if(H=="total"){I=b.price}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is(":checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is("select")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is('[data-type="slider"]')){I=parseFloat(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').data("resprice"));if(isNaN(I)){I=0}}}I=wpe_formatPrice(parseFloat(I),c);if(b.currencyPosition=="left"){I=b.currency+I}else{I+=b.currency}}if(f=="title"||f=="label"){I=F.attr("data-originaltitle")}if(f=="quantity"){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is(".checked")||jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is(":checked")){if(F.find(".icon_quantity").length>0){I=parseFloat(F.find(".icon_quantity").html())}else{I=F.find(".wpe_qtfield").val()}if(isNaN(I)){I=0}}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is('[data-type="slider"]')){I=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').slider("value")}}}if(f=="value"){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').is("select")){I='"'+jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').val()+'"'}else{I=(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+H+'"]').val());if(isNaN(I)){}}}if(f=="date"){if(F.is(".lfb_datepicker")&&F.datepicker("getDate")!=null){I="'"+jQuery.datepicker.formatDate("yy-mm-dd",F.datepicker("getDate"))+"'"}else{I="null"}}l.push({oldValue:o.substr(M-1,(o.indexOf("]",M)+1)-(M-1)),newValue:I})}var h=new Date();var d=h.getMonth()+1;if(d<10){d="0"+d}var t=h.getFullYear().toString()+d.toString()+h.getDate().toString();o=o.replace(/\[currentDate\]/g,t);if(o.indexOf("dateDifference-")>-1){while((M=o.indexOf("dateDifference-",M+1))!=-1){var B=o.indexOf("_",M+15)+1;var m=o.substr(M+15,o.indexOf("_",M)-(M+15));var y=o.substr(B,o.indexOf("]",B)-(B));if(m=="currentDate"){m=h}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+m+'"]').length>0&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+m+'"]').val().length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+m+'"]');m=F.datepicker("getDate")}else{m=h}}if(y=="currentDate"){y=t}else{if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+y+'"]').length>0&&jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+y+'"]').val().length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+y+'"]');y=F.datepicker("getDate")}else{y=h}}var u=Math.abs(y.getTime()-m.getTime());var v=Math.ceil(u/(1000*3600*24));if(v<0){v=0}l.push({oldValue:o.substr(M-1,(o.indexOf("]",M)+1)-(M-1)),newValue:v})}}if(o.indexOf("distance_")>-1){$target.attr("data-usedistance","true");while((M=o.indexOf("distance_",M+1))!=-1){var n="km";var e=o.indexOf("-",M+9)+1;var r=o.substr(M+9,o.indexOf("-",M)-(M+9));var L=o.indexOf("-",e)+1;var j=o.substr(e,o.indexOf("-",e)-(e));var z=o.indexOf("-",L)+1;var w=o.substr(L,o.indexOf("-",L)-(L));var s=o.indexOf("_",z)+1;var N=o.substr(z,o.indexOf("_",z)-(z));var k=o.indexOf("-",s)+1;var C=o.substr(s,o.indexOf("-",s)-(s));var D=o.indexOf("-",k)+1;var K=o.substr(k,o.indexOf("-",k)-(k));var g=o.indexOf("-",D)+1;var E=o.substr(D,o.indexOf("-",D)-(D));var G=o.indexOf("_",g)+1;var O=o.substr(g,o.indexOf("_",g)-(g));n=o.substr(G,o.indexOf("]",G)-(G));if(r!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+r+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+r+'"]');r=F.val()}else{r=0}}if(j!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+j+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+j+'"]');j=F.val()}else{j=0}}if(w!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+w+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+w+'"]');w=F.val()}else{w=0}}if(N!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+N+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+N+'"]');N=F.val()}else{N=0}}if(C!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+C+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+C+'"]');C=F.val()}else{C=0}}if(K!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+K+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+K+'"]');K=F.val()}else{K=0}}if(E!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+E+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+E+'"]');E=F.val()}else{E=0}}if(O!=""){if(jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+O+'"]').length>0){var F=jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"] #mainPanel .genSlide [data-itemid="'+O+'"]');O=F.val()}else{O=0}}if($target.closest(".genSlide").find(".lfb_distanceError").length>0){lfb_removeDistanceError(targetID,c)}var q=o.substr(M-1,(o.indexOf("]",M)+1)-(M-1));var x=0;if($target.attr("data-distance")!=""){x=parseFloat($target.attr("data-distance"))}if(r==""&&j==""&&N==""&&C==""&&K==""&&O==""&&w==""&&E==""){lfb_showDistanceError(targetID,c)}else{if(b.gmap_key==""){lfb_showDistanceError(targetID,c);console.log("invalid gmap api key")}else{var p=r+" "+w+" "+j+" "+N;var A=C+" "+E+" "+K+" "+O;if($target.attr("data-departure")!=p||A!=$target.attr("data-arrival")){$target.attr("data-departure",p);$target.attr("data-arrival",A);lfb_getDistanceCalc(q,c,targetID,p,A,n)}}}l.push({oldValue:o.substr(M-1,(o.indexOf("]",M)+1)-(M-1)),newValue:x})}}jQuery.each(l,function(){o=o.replace(this.oldValue,this.newValue)});o=o.replace(/\[total\]/g,jQuery('#estimation_popup.wpe_bootstraped[data-form="'+c+'"]  #finalPrice').html());o=o.replace(/\[total_quantity\]/g,wpe_getTotalQuantities(c,J));jQuery(this).html(o)}})};